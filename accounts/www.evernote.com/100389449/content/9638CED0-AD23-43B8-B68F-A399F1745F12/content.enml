<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note><div><br /></div><div><span style="font-size: 24px; font-weight: bold;">Installing PHP</span></div><div> </div><div>#: Written by KFH: <a href="mailto:karshi.hasanov@utoronto.ca">karshi.hasanov@utoronto.ca</a></div><div>#: Date: July 15, 2017</div><div>#: Description: PHP things</div><div>#: Last Modified: Feb. 19, 2018</div><div><br /></div><div>We will be installing the version 7.2</div><div>=&gt; sudo portsnap fetch</div><div>=&gt; cd /usr/ports/lang/php72</div><div>=&gt; export BATCH=1</div><div>=&gt; sudo make -DBATCH install clean</div><div><span style="font-weight: bold;">=&gt; sudo cp</span> /usr/local/etc/php.ini-production /usr/local/etc/php.ini</div><div>=&gt;<span style="font-weight: bold;"> cd</span> /usr/local/etc</div><div># Edit the php.ini file and set the Timezone for your City</div><div># Timezone Link: <a href="http://php.net/manual/en/timezones.php">http://php.net/manual/en/timezones.php</a></div><div><span style="font-weight: bold;">date.timezone</span> = America/Toronto</div><div><span style="font-size: 24px; font-weight: bold;">Installing the PHP Extensions</span></div><div><br /></div><div>=&gt; <span style="font-weight: bold;">cd </span>/usr/ports/lang/php72-extensions  </div><div><span style="color: rgb(169, 169, 169);"># Enable the OpenLDAP support ( you might need to use for phpLdapAdmin)</span></div><div>=&gt;<span style="font-weight: bold;"> sudo make -DBATCH install</span></div><div><br /></div><div><br /></div><div><span style="font-size: 24px; font-weight: bold;">Installing the PHP module for Apache</span></div><div># If you don’t have the Apache Server installed, it will install for you.</div><div>=&gt;<span style="font-weight: bold;"> cd </span>/usr/ports/www/mod_php72</div><div>=&gt; <span style="font-weight: bold;">sudo make -DBATCH  install clean</span></div><div><br /></div><div><span style="font-size: 24px; font-weight: bold;">Enable the PHP Support in the Apache Server (httpd.conf)</span></div><div><br /></div><div> </div><div># Make sure that the PHP module is enabled in “/usr/local/etc/apache24/httpd.conf":</div><div><span style="font-weight: bold;">LoadModule </span>php7_module        libexec/apache24/<a href="http://libphp5.so">libphp7.so</a></div><div><br /></div><div># Add index.php after index.html (means if index.html not found use index.php)</div><div><span style="font-weight: bold;">&lt;IfModule </span>dir_module<span style="font-weight: bold;">&gt;</span></div><div>    <span style="font-weight: bold;">DirectoryIndex </span>index.html index.php</div><div><span style="font-weight: bold;">&lt;/IfModule&gt;</span></div><div><br /></div><div># Add after the last line: Include etc/apache24/Includes/*.conf</div><div><span style="font-weight: bold;">AddHandler</span> application/x-httpd-php    .php </div><div><span style="font-weight: bold;">AddHandler</span> application/x-httpd-php-source    .phps </div><div><br /></div><div><span style="font-weight: bold; text-decoration: underline;">Testing the PHP Module</span># Lets create a PHP file inside the DocumentRoot (<a href="http://www.karshi.ca">www.karshi.ca</a>)</div><div># We will call it php_info.php and insert the following code:</div><div>&lt;?php <span style="font-weight: bold;">phpinfo()</span>; ?&gt;</div><div><br /></div><div><br /></div><div># We can visit <a href="http://www.karshi.ca/test.php">http://www.karshi.ca/test.php</a></div><div># You should see a lot of info there</div><div><br /></div><div><span style="font-weight: bold; text-decoration: underline;">PHPpgAdmin ( PostGRE)</span></div><div><br /></div><div>=&gt;<span style="font-weight: bold;"> cd <span style="font-weight: bold;">/usr/ports/databases/phppgadmin</span></span></div><div>=&gt;<span style="font-weight: bold;"> sudo</span> make install</div><div>Note: Don't make 'clean' it will delete the work directory where the "conf" folder is. </div><div><br /></div><div>Create the </div><div>phppgadmin.conf</div><div> file (or you can add these lines in the Apache https.conf):</div><div>=&gt; <span style="font-weight: bold;">sudo vim </span></div><div>/usr/local/etc/apache24/Includes/phppgadmin.conf</div><div><br /></div><div>----------------------------------------------------------</div><div>Alias /phppgadmin "/usr/local/www/phpPgAdmin</div><div>"</div><div><span style="font-weight: bold;">&lt;Directory</span> "</div><div>/usr/local/www/phpPgAdmin/"<span style="font-weight: bold;">&gt;</span>Options <span style="font-weight: bold;">None</span>AllowOverride <span style="font-weight: bold;">Limit</span>Require <span style="font-weight: bold;"> ip</span> 10.10.10.</div><div><br /></div><div><span style="font-weight: bold;">&lt;/Directory&gt;</span></div><div> -------------------</div><div><br /></div><div>Edit "</div><div>/usr/local/www/phpPgAdmin/conf/config.inc.php</div><div>"</div><div>Near Line 88:</div><div>change this  ---&gt;  <span style="font-weight: bold;"> $conf['extra_login_security'] =</span><span style="font-style: italic; font-weight: bold;">true </span>;</div><div>To  this        ---&gt;   <span style="font-weight: bold;">$conf['extra_login_security'] = </span><span style="font-style: italic; font-weight: bold;">false</span>;</div><div><br /></div><div> &lt;FilesMatch "\.php$"&gt;</div><div>    SetHandler application/x-httpd-php</div><div>&lt;/FilesMatch&gt;</div><div>&lt;FilesMatch "\.phps$"&gt;</div><div>    SetHandler application/x-httpd-php-source</div><div>&lt;/FilesMatch&gt;</div><div><br /></div><div><br /></div></en-note>