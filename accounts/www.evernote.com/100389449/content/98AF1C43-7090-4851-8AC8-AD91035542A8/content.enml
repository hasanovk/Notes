<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note><div><span style="font-weight: bold; font-size: 24px;">Git Repository on FreeBSD</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);">#: Written by KFH: </span><span style="color: rgb(146, 146, 146);"><a href="mailto:karshi.hasanov@utoronto.ca">karshi.hasanov@utoronto.ca</a></span></div><div><span style="color: rgb(146, 146, 146);">#: Date: May 25, 2018</span></div><div><span style="color: rgb(146, 146, 146);">#: Description: Setting up the Git Server on FreeBSD 11.1</span></div><div><span style="color: rgb(146, 146, 146);">#: Last Modified: --</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Update the packages</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">portsnap fetch update</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Install dependencies:</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">pkg install -y</span> <span style="color: rgb(4, 51, 255);">xmlcatmgr</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">pkg install -y</span><span style="color: rgb(4, 51, 255);"> libatomic_ops</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span> <span style="font-weight: bold;">pkg install -y</span><span style="color: rgb(4, 51, 255);"> perl5</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Install the Git</span></div><div>=&gt;<span style="font-weight: bold;"> cd</span><span style="color: rgb(148, 17, 0);"> /usr/ports/devel/git</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">make install clean</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Create a Git user:</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span> <span style="font-weight: bold;">pw groupadd -n</span> <span style="color: rgb(0, 145, 147);">git</span><span style="font-weight: bold;"> -g 9418</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">pw useradd -n</span> <span style="color: rgb(0, 145, 147);">git</span> <span style="font-weight: bold;">-u 9418 -g</span> <span style="color: rgb(0, 145, 147);">git</span> <span style="font-weight: bold;">-c</span> git<span style="font-weight: bold;"> -d</span> <span style="color: rgb(148, 17, 0);">/git</span>  <span style="color: rgb(148, 55, 255);"> -s </span><span style="color: rgb(148, 55, 255); font-weight: bold;">/usr/local/libexec/git-core/git-shell</span> <span style="font-weight: bold;">-h -</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Create the Git directory:</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo </span><span style="font-weight: bold;">mkdir</span><span style="color: rgb(148, 17, 0);"> /git</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span> <span style="font-weight: bold;">chown</span><span style="color: rgb(0, 145, 147);"> git:git</span><span style="color: rgb(148, 17, 0);"> /git/</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo </span><span style="font-weight: bold;">chmod 755</span><span style="color: rgb(148, 17, 0);"> /git</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span> <span style="font-weight: bold;">mkdir</span><span style="color: rgb(148, 17, 0);"> /git/base/</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo </span><span style="font-weight: bold;">chown</span> <span style="color: rgb(0, 145, 147);">git:git</span><span style="color: rgb(148, 17, 0);"> /git/base/</span></div><div>=&gt;<span style="color: rgb(255, 47, 146);"> sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">chmod 775</span><span style="color: rgb(148, 17, 0);"> /git/base/</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Create the SSH Key</span></div><div><span style="color: rgb(146, 146, 146);"># You can dump your public key to the “authorized_keys” to auto login.</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">mkdir</span><span style="color: rgb(148, 17, 0);"> /git/.ssh/</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span><span style="color: rgb(255, 47, 146); font-weight: bold;"> </span><span style="font-weight: bold;">chmod 700</span> <span style="color: rgb(148, 17, 0);">/git/.ssh/</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span><span style="font-weight: bold;"> touch</span> <span style="color: rgb(148, 17, 0);">/git/.ssh/</span><span style="color: rgb(0, 143, 0);">authorized_keys</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span><span style="font-weight: bold;"> chmod 600</span> <span style="color: rgb(148, 17, 0);">/git/.ssh/</span><span style="color: rgb(79, 143, 0);">authorized_keys</span></div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span><span style="font-weight: bold;"> chown -R</span><span style="color: rgb(0, 145, 147);"> git:git /g</span><span style="color: rgb(148, 17, 0);">it/.ssh/</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Edit the “/etc/rc.conf”</span></div><div><span style="color: rgb(146, 144, 0);">git_daemon_enable</span>="<span style="font-weight: bold;">YES</span>"</div><div><span style="color: rgb(146, 144, 0);">git_daemon_directory</span>="<span style="font-weight: bold;">/git</span>"</div><div><span style="color: rgb(146, 144, 0);">git_daemon_flags=</span>"<span style="font-weight: bold;">--syslog --base-path=/git --export-all --reuseaddr --detach</span>"</div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Start the Git:</span></div><div>=&gt;<span style="font-weight: bold;"> /usr/local/etc/rc.d/git_daemon</span><span style="color: rgb(0, 143, 0);"> start</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># The Initial Test:</span></div><div><span style="color: rgb(146, 146, 146);"># Make sure that you add youself to the “git” group.</span></div><div><span style="color: rgb(146, 146, 146);"># I’ve added the user “khasanov” to the “git group</span></div><div><span style="color: rgb(146, 146, 146);"># Then I’ve created the follwoting folder using my account:</span></div><div><span style="color: rgb(148, 33, 147);">[khasanov]</span> =&gt; <span style="font-weight: bold;">mkdir</span> <span style="color: rgb(148, 17, 0);">/git/base/test.git</span></div><div><span style="color: rgb(148, 33, 147);">[khasanov] </span>=&gt;<span style="font-weight: bold;"> cd</span><span style="color: rgb(148, 17, 0);"> /git/base/test.git</span></div><div><span style="color: rgb(148, 33, 147);">[khasanov] </span>=&gt; <span style="font-weight: bold;">git</span> <span style="color: rgb(4, 51, 255);">init</span> <span style="color: rgb(148, 55, 255);">--bare --shared</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># On my local MAC OS:</span></div><div>=&gt;<span style="font-weight: bold;"> mkdir</span><span style="color: rgb(148, 17, 0);"> ~/tmp/test</span></div><div>=&gt;<span style="font-weight: bold;"> cd</span> <span style="color: rgb(148, 17, 0);">~/tmp/test  </span></div><div>=&gt; <span style="font-weight: bold;">git init</span></div><div>=&gt; <span style="font-weight: bold;">echo</span> 'test' &gt; test</div><div>=&gt;<span style="font-weight: bold;"> git</span><span style="color: rgb(4, 51, 255);"> add .</span></div><div>=&gt; <span style="font-weight: bold;">git</span> <span style="color: rgb(4, 51, 255);">commit</span> <span style="color: rgb(146, 146, 146);">-m 'test commit'</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># Push the local repository to remote:</span></div><div>=&gt; <span style="font-weight: bold;">git</span><span style="color: rgb(4, 51, 255);"> remote</span><span style="color: rgb(79, 143, 0);"> add </span><span style="color: rgb(148, 33, 147);">origin</span> <span style="color: rgb(4, 51, 255);">khasanov@192.168.100.250:/git/base/test.git</span></div><div>=&gt;<span style="font-weight: bold;"> git</span> <span style="color: rgb(255, 64, 255);">push</span> <span style="color: rgb(148, 23, 81);">origin</span><span style="font-weight: bold;"> master</span></div><div><span style="color: rgb(146, 146, 146);"># Note: I already had a keyless SSH access setup on my server, so didn’t need any password.</span></div><div><br /></div><div><span style="color: rgb(146, 146, 146);"># To Clone the Remote Repository:</span></div><div>=&gt; git clone <a href="git://s1">git://</a>192.168.100.250<a href="http://domain.com/base/test.git">/base/test.git</a></div><div><br /></div><div><br /></div><div><br /></div></en-note>