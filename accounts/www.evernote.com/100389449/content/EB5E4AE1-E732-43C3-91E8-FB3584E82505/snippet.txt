Tutorial Home‎ > ‎ Creating a gateway router with natd and stateful firewall in FreeBSD To set up my home freebsd box as a natd/firewall/router I used the following config settings. If done right, the whole process can be done by working with 4 files and only 1 reboot. /usr/src/sys/i386/conf/NEWKERNEL Compile a custom kernel with the following options: http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kernelconfig-building.html options IPFIREWALL options IPFIREWALL_VERBOSE options IPDIVERT /etc/rc.conf See /etc/default/rc.conf for a full list of options and short info about each one. #Public Interface ifconfig_fxp0="DHCP" #These are connected to my two workstations ifconfig_re0="inet 192.168.0.1 netmask 255.255.255.0" ifconfig_re1="inet 192.168.1.1 netmask 255.255.255.0" #To make sure I can route between workstations router_enable="YES" #for natd firewall magic gateway_enable="YES" natd_enable="YES" natd_flags="-f /etc/natd.conf" firewall_enable="YES" firewall_script="/etc/ipfw