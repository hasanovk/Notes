<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">
<en-note><div><span style="font-weight: bold;">SAMBA</span><span style="font-weight: bold; text-decoration: underline;">Samba Server Installation</span><br/>=&gt; cd /usr/ports/net/samba36 &amp;&amp; sudo make install</div><div>Hint: If you have tried previously and decided fresh config: =&gt;<span style="font-weight: bold;"> sudo make rmconfig</span>  ( this will remove the old config file</div><div>Enable:</div><div><span style="font-weight: bold;">ACL_SUPPORT</span></div><div>        <span style="font-weight: bold;">AIO_SUPPORT</span> ( Asyncronous IO support )</div><div><span style="font-weight: bold;">CUPS  </span>  ( CUPS printing support )</div><div><span style="font-weight: bold;">PORT</span>    ( Sytem wide PORT library )</div><div><span style="font-weight: bold;">PTHREADPOOL</span>  ( Pthread pool )</div><div><span style="font-weight: bold;">SWAT </span> ( SWAT WebGUI )</div><div><span style="font-weight: bold;">WINBIND</span> (WinBIND support )</div><div><br/></div><div>Edit &quot;/etc/rc.conf&quot; and add the line <span style="font-weight: bold;">samba_enable =</span><span style="font-weight: bold; font-style: italic;"> &quot;Yes&quot;</span><span style="font-style: italic;"> </span></div><div><br/></div><div><br/></div><div><span style="text-decoration: underline;">Web Interface GUI ( SWAT ) setup:</span></div><div>If you have enabled the &quot;SWAT&quot; option as above configuration:</div><div>1.Uncomment the following line in the &quot;<span style="font-style: italic;">/etc/inetd.conf&quot;</span> file</div><div>1.<span style="font-weight: bold;">stream </span><span style="font-weight: bold;">tcp</span><span style="font-weight: bold;">nowait/400</span><span style="font-weight: bold;">root</span><span style="font-weight: bold;">/usr/local/sbin/swat</span><span style="font-weight: bold;">swat</span></div><div>1.If you already have running the &quot;inetd&quot;:</div><div>1.=&gt; sudo killall -HUP inetd   ( to restart the inetd )</div><div>      b.  If  not, then you need to add the line<span style="font-weight: bold;"> inetd_enable=</span><span style="font-weight: bold; font-style: italic;">&quot;YES&quot;</span> in the &quot;/etc/rc.conf&quot; file,</div><div>           then =&gt;<span style="font-weight: bold;"> sudo /etc/rc.d/inetd </span><span style="font-weight: bold; font-style: italic;">onestart </span><span style="font-weight: bold;"> </span> </div><div><br/></div><div>2.If everything's ok, then you can locally have access to <a style="font-weight: bold;" href="http://localhost:901">http://localhost:901</a></div><div>3.In order a user to use the Samba server, he/she must have a local and samba user/passwd name !</div><div>1.=&gt; sudo <span style="font-weight: bold;">smbpasswd -a </span><span style="font-style: italic;"> &lt;user_name&gt;</span>      ( to add a new samba user )</div><div><br/></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Samba Client Usage</span></div><div><br/></div><div>&quot;<span style="font-weight: bold;">nmblookup</span>&quot;   -  NetBIOS over TCP/IP client used to lookup NetBIOS names  ( same as MS<span style="font-weight: bold;"> nbtstat </span>command )</div><div>=&gt; <span style="font-weight: bold;">nmblookup -A </span><span style="font-style: italic;"> &lt;IP_Address&gt; </span>  ( show NetBIOS names and status )</div><div>=&gt;<span style="font-weight: bold;"> nmblookup -S</span><span style="font-style: italic;"> &lt;NetBIOS_Name&gt;</span> ( same as above ) </div><div>=&gt;<span style="font-weight: bold;"> nmblookup -A </span><span style="font-style: italic;">10.10.10.110</span>  ( using the IP address of my Samba Server )</div><div>=&gt;<span style="font-weight: bold;"> nmblookup -S</span> <span style="font-style: italic;">vm-samba</span>  ( using the NetBIOS name of my Samba Server )</div><div><br/></div><div>Example 1. In this example we are running FreeBSD and have the samba client installed.  We want to mount</div><div>a samba shared folder to our local folder , called &quot;<span style="font-style: italic;">/home/khasanov/samba_shared</span>&quot;. The Samba server</div><div>host name is <span style="font-style: italic;">SambaSRV</span> with<span style="font-style: italic;"> IP = 10.10.10.220</span>. The samba server has a folder to share and it's name</div><div>&quot;common&quot;. There is a samba user, called &quot;samba_user&quot; and it has a password assigned.</div><div>=&gt; sudo <span style="font-weight: bold;">mount_smbfs -I 10.10.10.220 //</span><span style="font-weight: bold; font-style: italic;">samba_user@SambaSRV/common</span>  <span style="font-style: italic;">/home/khasanov/samba_shared</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Useful MS DOS Commands:</span></div><div>&quot;<span style="font-weight: bold;">nbtstat</span>&quot;  - Displays protocol statistics and current TCP/IP connections using NBT ( NetBIOS over TCP/IP ).</div><div>Usage:</div><div>=&gt;<span style="font-weight: bold;"> nbtstat -n</span>  ( lists all local NetBIOS names )</div><div>=&gt; <span style="font-weight: bold;">nbtstat -a</span> &lt;IP&gt; / &lt;NetBIOS Name&gt;  ( list the NetBIOS names and status )</div><div>=&gt;<span style="font-weight: bold;"> nbtstat -a</span> <span style="font-style: italic;">10.10.10.110</span>  or <span style="font-weight: bold;">nbtstat -a</span> <span style="font-style: italic;">vm-samba</span>  ( where IP=10.10.10.110 is my Samba server with NetBIOS name &quot;vm-samba&quot;)</div><div><br/></div><div><br/></div><div>&quot;<span style="font-weight: bold;">net</span>&quot;  - This command has many options, but we are interested only &quot;<span style="font-weight: bold;">net view</span>&quot;.</div><div>=&gt;<span style="font-weight: bold;"> net view</span><span style="font-style: italic;"> \\IP_Address</span><span style="font-weight: bold;"> </span> or <span style="font-weight: bold;">net view</span><span style="font-style: italic;"> \\NetBIOS_Name</span>  ( both shows available shared folders )</div><div>=&gt;<span style="font-weight: bold;"> net view</span><span style="font-style: italic;"> \\10.10.10.110</span>  ( will show samba shared folders on the Samba Server )</div><div>=&gt;<span style="font-weight: bold;"> net view</span><span style="font-style: italic;"> \\vm-samba</span>      ( same as above, but we used NetBIOS instead of IP )</div><div><br/></div><div>On MacOS:</div><div>=&gt; mount -t smbfs //smb-user:hassan3@10.10.10.100/KFH_Samba KFH_Samba</div></en-note>
