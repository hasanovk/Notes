<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">
<en-note><div><span>FAMP</span>: <span>F</span>reeBSD <span>A</span>pache <span>M</span>ySQL <span>P</span>HP</div><div>LAMP: Linux Apache MySQL Perl/PHP</div><div>Written by: Karshi Hasanov</div><div>Last Modified: Nov.7, 2015</div><div><br/></div><div><span style="font-weight: bold;">APACHE Server </span></div><div><br/></div><div>I)<span style="font-weight: bold;"> </span><span style="font-weight: bold; text-decoration: underline;">Installation</span></div><div>=&gt; <span style="font-weight: bold;">cd </span>/usr/ports/www/apache24 &amp;&amp; <span style="font-weight: bold;">sudo make install </span> </div><div>(leave the default options).</div><div><span>If this is not your first installation, you might need to clean the old one:</span><br/><span>=&gt; sudo make clean &amp;&amp; sudo make rmconfig</span></div><div><br/></div><div>Add the line <span style="font-weight: bold;">apache24_enable</span>='<span style="font-weight: bold;">YES</span>' in your /etc/rc.conf file</div><div><br/></div><div>II) <span style="font-weight: bold;">Configuration File </span><span style="font-weight: bold;"><font color="#941100">httpd.conf</font></span></div><div>Open the <font color="#941100">/usr/local/etc/apache24/httpd.conf</font> file and check the following settings:<br/></div><div><br/></div><div><span style="font-weight: bold;">ServerAdmin </span><a style="font-style: italic;" href="mailto:khasanov@karshi.ca">khasanov@karshi.ca</a></div><div><span style="font-weight: bold;">DocumentRoot </span><font color="#941100"> <i>“</i> <span style="font-style: italic;">/opt/hosting/</span><a style="font-style: italic; color: rgb(148, 17, 0);" href="http://www.karshi.ca">www.karshi.ca</a><i>”</i></font>  </div><div># Default location of website </div><div><span style="font-weight: bold;"><br/></span></div><div><span style="font-weight: bold;">&lt;Directory</span> &quot;/opt/hosting/<a href="http://www.karshi.ca">www.karshi.ca</a> &quot;<span style="font-weight: bold;">&gt;</span></div><div># These are defaults. </div><div><span style="font-weight: bold;">   <font color="#941100"> </font><font color="#941100">Options</font></span><span> </span><span>Indexes FollowSymLinks</span></div><div><span style="font-weight: bold;"><span>    </span><font color="#941100">AllowOverride</font></span> <span>None</span></div><div><span style="font-weight: bold;"><span>    </span><font color="#941100">Require</font></span><span> </span><span>all granted</span><br/><span style="font-weight: bold;">&lt;/Directory&gt;</span></div><div><br/></div><div>III) <span style="font-weight: bold;">Initial</span><span style="font-weight: bold;"> Testing</span><br/></div><div>- Create a test file under the <span style="font-weight: bold;">DocumentRoot </span>folder</div><div>  ( /opt/hosting/www.<a href="http://karshi.ca/">karshi.ca/</a>index.html)</div><div><br/></div><div>- Restart the server:</div><div>.=&gt; <span style="font-weight: bold;">sudo</span><font color="#941100"> <span style="font-weight: bold;">/usr/local/etc/rc.d/</span></font><span style="font-weight: bold;"><font color="#941100">apache24</font><font color="#008f00"> </font></span><font color="#008f00"><span style="font-weight: bold; font-style: italic;">onestart</span><span style="font-weight: bold;">  </span></font>( only if you are starting first time !)</div><div>- Visit the website  <a href="http://karshi.ca">http://karshi.ca</a>  or <a href="http://IP_Address">http://IP_Address</a></div><div>  </div><div>- Watch the log file</div><div>=&gt;<span style="font-weight: bold;"> tail </span>-f <font color="#941100">/var/log/&lt;website&gt;<span style="font-weight: bold;">-access.log</span></font> </div><div>=&gt; tail -f <font color="#941100">/var/log/&lt;website&gt;<span style="font-weight: bold;">-error.log</span></font></div><div><br/></div><div><span style="font-weight: bold;"> </span><span style="font-weight: bold; text-decoration: underline;">Setting Up The Virtual Hosts</span></div><div><br/></div><div># Most of the time, we will need to host multiple web sites, so let us include (enable)</div><div># the Virtual Host File (its in the Supplemental Configuration Session):</div><div><span style="font-weight: bold;">Include</span> </div><div><span> etc/apache24/extra/</span><span>httpd-vhosts.conf</span><br/><span># Note: If you use the Virtual Hosts, the Apache will ignore the DocumentRoot Directory.</span><br/><span># Instead, it will default to the first (top) Virtual Host </span></div><div><br/></div><div> </div><div><span style="font-weight: bold;">&lt;VirtualHost *:80&gt;</span><br/>    <span># e-mail for the server admin</span><br/>    <span style="font-weight: bold;">ServerAdmin</span> <a href="mailto:karshi.hasanov@icloud.com">karshi.hasanov@icloud.com</a><br/>    <span># Top directory where the files for this virtual hosts are</span><br/>    <span style="font-weight: bold;">DocumentRoot</span> &quot;<span>/opt/hosting/</span><a href="http://www.karshi.ca">www.karshi.ca</a>&quot;<br/>    <span># The server URL for the public. Make sure it's in DNS (local and ISP )</span><br/>    <span style="font-weight: bold;">ServerName</span> <a href="http://www.karshi.ca">www.karshi.ca</a><br/>    <span># All the errors with the config files, server misconfiguirations etc. are logged here</span><br/>    <span>ErrorLog</span> &quot;<span>/var/log/</span><a href="http://www.karshi.ca">www.karshi.ca</a><span style="font-weight: bold;">-error.log</span>&quot;<br/>    <span># This is the access log in common format. </span><br/>    <span style="font-weight: bold;">CustomLog</span> &quot;<span>/var/log/</span><a href="http://www.karshi.ca">www.karshi.ca</a><span style="font-weight: bold;">-access.log</span>&quot; <span>common</span><br/>    <span># Use this to give access to the servers.</span><br/>    <span style="font-weight: bold;">&lt;Directory</span> &quot;<span>/opt/hosting/</span><a href="http://www.karshi.ca">www.karshi.ca</a>&quot;&gt;<br/>        <span style="font-weight: bold;">Options</span> <span>All</span><br/>        <span style="font-weight: bold;">AllowOverride</span> <span>All</span><br/>        <span># The syntax is case sensitive!</span><br/>        <span style="font-weight: bold;">Require</span> <span>all granted</span><br/>     <span style="font-weight: bold;">&lt;/Directory&gt;</span><br/><span style="font-weight: bold;">&lt;/VirtualHost&gt;</span></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;"> </span></div><div><span style="font-weight: bold; text-decoration: underline;">Setting Up HTTPS (SSL Support)</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold; font-style: italic; text-decoration: underline;">Required modules:</span> &quot;<span style="font-weight: bold;">mod_log_config</span>&quot;, &quot;<span style="font-weight: bold;">mod_ss</span>l&quot;, &quot;<span style="font-weight: bold;">so cache_shmcb_module</span>&quot;</div><div>We will be using the &quot;self-issued&quot; or &quot;self-signed&quot; certificate here. To see how to generate the</div><div>self-signed Certificate, please see my notes below: &quot;<span style="font-weight: bold;">How To Create Self-signed Certificates</span>&quot;.</div><div><br/><span style="font-weight: bold;">Step 1:</span></div><div> Edit the file  &quot;<span style="font-weight: bold; font-style: italic;">/usr/local/etc/apache24/httpd.conf </span>&quot; and enable the modules:</div><div><br/></div><div><span style="font-weight: bold;">LoadModule </span>socache_shmcb_module libexec/apache24/<a style="font-weight: bold;" href="http://mod_socache_shmcb.so">mod_socache_shmcb.so</a></div><div><span># This module provides for creation and access to a cache backed by a high-performance </span><br/><span>        # cyclic buffer inside a shared memory segment.</span></div><div><br/></div><div><span style="font-weight: bold;">          LoadModule </span>log_config_module libexec/apache24/<a style="font-weight: bold;" href="http://mod_log_config.so">mod_log_config.so</a></div><div><span style="font-weight: bold;">  </span></div><div><span># Allows flexible logging of client requests in a customizable format.</span></div><div><br/></div><div><span style="font-weight: bold;">LoadModule </span>ssl_module libexec/apache24/<a style="font-weight: bold;" href="http://mod_ssl.so">mod_ssl.so</a></div><div><span style="font-weight: bold;">  </span></div><div><span># This module provides SSL v3 and TLS v1.x support for the Apache HTTP Server. </span><br/><span>        #  </span><span>SSL v2</span><span> is no longer supported.</span></div><div><br/></div><div><br/></div><div>        # Uncomment the line:</div><div><span style="font-weight: bold;">Include</span> etc/apache24/extra/<span style="font-weight: bold;">httpd-ssl.conf</span></div><div><br/></div><div><span style="font-weight: bold;">Step 2: </span></div><div>Editing the file &quot;<span style="font-weight: bold; font-style: italic;">/usr/local/etc/apache24/extra/httpd-ssl.conf </span><span style="font-weight: bold;">&quot;</span></div><div><br/></div><div><span style="font-weight: bold;">&lt;VirtualHost _default_:443&gt;</span></div><div><span style="font-weight: bold;">DocumentRoot </span></div><div><span>&quot;/opt/hosting/www.</span><a href="http://karshi.ca">karshi.ca</a><span>&quot;</span></div><div><br/></div><div><span style="font-weight: bold;">  ServerName</span> </div><div><a href="http://www.karshi.ca:443">www.karshi.ca:443</a></div><div><br/></div><div><span style="font-weight: bold;">  ServerAdmin</span> </div><div><a href="mailto:karshi.hasanov@icloud.com">karshi.hasanov@icloud.com</a></div><div><br/></div><div><span style="font-weight: bold;">  ErrorLog</span> </div><div><span>&quot;/var/log/ssl_www.karhsi.ca-error.log&quot;</span></div><div><br/></div><div><span style="font-weight: bold;">  TransferLog</span></div><div><span> &quot;/var/log/ssl_www.karshi.ca-access.log&quot;</span></div><div><br/></div><div><br/></div><div>                #   Enable/Disable SSL for this virtual host.</div><div><span style="font-weight: bold;">    SSLEngine</span></div><div><span> on</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">    SSLCertificateFile</span> </div><div><span>&quot;/etc/KFH_Certs/webserver/</span><span>server.crt</span></div><div>&quot;</div><div><span style="font-weight: bold;">    SSLCertificateKeyFile</span> </div><div><span>&quot;/etc/KFH_Certs/webserver/</span><span>server.key</span><span>&quot;</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">    &lt;Directory</span> </div><div><span>&quot;/opt/hosting/scripts/cgi-bin&quot;</span></div><div>&gt;    &lt;-- don't forget to create this folder</div><div>    SSLOptions +StdEnvVars</div><div><span style="font-weight: bold;">    &lt;/Directory&gt;</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">                   CustomLog </span>&quot;</div><div><span>/var/log/</span><a href="http://ssl_karshi.ca">ssl_karshi.ca</a></div><div><span style="font-weight: bold;">-request.log</span>&quot; \</div><div>                                 &quot;%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \&quot;%r\&quot; %b&quot;</div><div><br/></div><div><span style="font-weight: bold;">&lt;/VirtualHost&gt;</span></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">How To Create a Self-signed Certificate:</span></div><div><span style="font-weight: bold;">Step 1</span>: Make a directory where you want to keep all your Certificates</div><div>        =&gt; <span style="font-weight: bold;">sudo</span> <span style="font-weight: bold;">mkdir</span> <span style="font-weight: bold;">-p</span> </div><div><span>/etc/KFH_Certs/webserver</span></div><div><br/></div><div>=&gt;<span style="font-weight: bold;"> cd</span> </div><div><span>/etc/KFH_Certs/webserver</span></div><div><br/></div><div>        <span style="font-weight: bold;">Step 2</span>: Generate the keys</div><div>        =&gt; <span style="font-weight: bold;">sudo openssl genrsa -out</span> </div><div><span>server.key</span></div><div> 1024</div><div>=&gt;<span style="font-weight: bold;"> sudo openssl req -new -key</span> </div><div><span>server.key</span> <span style="font-weight: bold;">-out</span> <span>server.csr</span><span>Country Name</span><span> (2 letter code) [AU]:</span><span>CA </span><br/><span>State or Province Name</span><span> (full name) [Some-State]:</span><span>Ontario </span><br/><span>Locality Name</span><span> (eg, city) []:</span><span>Toronto </span><br/><span>Organization Name</span><span> (eg, company) [Internet Widgits Pty Ltd]:</span><span>KFH Inc.</span><span> </span><br/><span>Organizational Unit Name</span><span> (eg, section) []:</span><span>Technology Dept. </span><br/><span>Common Name</span><span> (e.g. server FQDN or YOUR name) []:</span><a href="http://www.karshi.ca">www.karshi.ca</a><span> </span><br/><span>Email Address</span><span> []:</span><a href="mailto:karshi.hasanov@icloud.com">karshi.hasanov@icloud.com</a><span> </span><br/><span>        Please enter the following 'extra' attributes to be sent with your certificate request </span><br/><span>A challenge password </span><span>[]: </span><span style="font-weight: bold;">&lt;Enter&gt;</span><br/><span>An optional company name</span><span> []:</span><span style="font-weight: bold;"> &lt;Enter&gt;</span></div><div><br/></div><div> </div><div><span style="font-weight: bold;">Step 3</span>: Sign the Certificate</div><div>=&gt;<span style="font-weight: bold;">sudo openssl x509 -req -days 3650 -in</span> </div><div><span>server.csr</span> <span style="font-weight: bold;">-signkey</span> <span>server.key</span> <span style="font-weight: bold;">-out </span><span>server.crt</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">MySQL Server </span></div><div><br/></div><div><span style="font-weight: bold;">Step 1: Installing the MySQL Server</span></div><div>=&gt; <span style="font-weight: bold;">cd</span> </div><div><span>/usr/ports/databases/mysql55-server</span></div><div><br/></div><div>=&gt; <span style="font-weight: bold;">sudo make install clean</span></div><div><br/></div><div><span style="font-weight: bold;">Log File: </span></div><div><span>/var/db/mysql/</span><span>&lt;FQHN&gt;.err</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">Step 2:</span></div><div> Edit the &quot;/etc/rc.conf&quot; and add the line: <span style="font-style: italic;">mysql_enable</span>=&quot;<span style="font-weight: bold;">YES</span>&quot;</div><div>           </div><div> </div><div><span> Note: Starting the MySQL Server version 5.6.8 there are no &quot;my.cnf&quot;, so skip below 2 lines</span><br/><span>    ( </span><a href="https://dev.mysql.com/doc/refman/5.6/en/server-default-configuration-file.html">https://dev.mysql.com/doc/refman/5.6/en/server-default-configuration-file.html</a><span> )</span><br/><span> </span></div><div># Before I forget: After I've installed the version 5.6.8, I had to do this</div><div>            =&gt; cd /usr/local &amp;&amp; sudo sudo mysql_install_db</div><div><span>            To start mysqld at boot time you have to copy</span><br/><span>             support-files/mysql.server to the right place for your system</span><br/></div><div><br/></div><div><span>             PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !</span></div><div><br/><span>             To do so, start the server, then issue the following commands:</span><br/></div><div><br/></div><div><span>             ./bin/mysqladmin -u root password 'new-password'</span></div><div><br/><span>             ./bin/mysqladmin -u root -h </span><a href="http://mailserver.jam2m.com">mailserver.jam2m.com</a><span> password 'new-password'</span><br/></div><div><br/></div><div><span>              Alternatively you can run:</span></div><div><br/></div><div><br/></div><div><span>             ./bin/mysql_secure_installation</span></div><div><br/></div><div><br/></div><div><span>             which will also give you the option of removing the test</span></div><div><br/><span>             databases and anonymous user created by default.  This is</span><br/><span>             strongly recommended for production servers.</span><br/></div><div><br/></div><div><span>             See the manual for more instructions.</span></div><div><br/></div><div><br/></div><div><span>             You can start the MySQL daemon with:</span></div><div><br/></div><div><br/></div><div><span>             cd . ; ./bin/mysqld_safe &amp;</span></div><div><br/></div><div><br/></div><div><span>             You can test the MySQL daemon with </span><a href="http://mysql-test-run.pl">mysql-test-run.pl</a></div><div><br/></div><div><br/></div><div><span>             cd mysql-test ; perl </span><a href="http://mysql-test-run.pl">mysql-test-run.pl</a></div><div><br/></div><div><br/></div><div><span>             Please report any problems at </span><a href="http://bugs.mysql.com/">http://bugs.mysql.com/</a></div><div><br/></div><div><br/></div><div><span>           WARNING: Found existing config file ./my.cnf on the system.</span></div><div><br/><span>           Because this file might be in use, it was not replaced,</span><br/><span>           but was used in bootstrap (unless you used --defaults-file)</span><br/><span>           and when you later start the server.</span><br/><span>           The new default config file was created as ./my-new.cnf,</span><br/><span>           please compare it with your file and take the changes you need.</span></div><div><br/></div><div>           ################ end of 5.6.8 version notes #############</div><div>           =&gt;<span style="font-weight: bold;"> sudo cp</span></div><div><span> /usr/local/share/mysql/</span><span>my-medium.cnf</span> <span>/var/db/mysql/</span><span>my.cnf</span></div><div><br/></div><div><span style="font-weight: bold;">             </span>=&gt; <span style="font-weight: bold;">sudo chmod 640</span> </div><div><span>/var/db/mysql/</span><span>my.cnf</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">Step 3:</span></div><div> Start the Server: =&gt; sudo <span style="font-weight: bold;">/usr/local/etc/rc.d/mysql-server</span> <span style="font-style: italic;">onestart</span></div><div><br/><span style="font-weight: bold;">Step 4:</span> First time you run, secure the <span style="font-weight: bold;">root</span> user account and delete '<span style="font-weight: bold;">nameless</span>' user:</div><div>     =&gt; <span style="font-weight: bold;">mysql -u</span> <span style="font-weight: bold;">root</span> </div><div><span>mysql</span></div><div><br/></div><div>     </div><div><span>mysql &gt;</span> <span>UPDATE</span> <span>use</span>r <span>SET</span> <span style="font-weight: bold;">Password</span>='<span>oldBASE</span>' <span>WHERE</span> <span style="font-weight: bold;">User</span>='<span>root</span></div><div>';</div><div>    </div><div><span> mysql &gt;</span> <span>DELETE FROM</span> <span>user </span><span>WHERE</span><span style="font-weight: bold;"> User</span>='';         <span># Note  &quot; = '  + '    , twice '  not a single &quot;</span></div><div><br/></div><div>     </div><div><span>mysql &gt;</span> <span>FLUSH PRIVILEGES</span></div><div>;</div><div>     </div><div><span>mysql &gt;</span> <span>QUIT</span></div><div>;</div><div>     </div><div><span># The &quot;</span><span>user</span><span>&quot; is the name of the table which holds the users and passwords</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">Step 5: </span></div><div>Lets add the user &quot;khasanov&quot; and gave a full privileges to all databases:</div><div>     =&gt; mysql -u root mysql -p   </div><div><span># The option &quot;-p&quot; will ask to provide root's password</span></div><div><br/></div><div>    </div><div><span> mysql &gt;</span> <span>GRANT ALL PRIVILEGES ON</span> <span style="font-weight: bold;">*.* </span><span>TO</span> '<span style="font-weight: bold;">khasanov</span>'@'<span style="font-weight: bold;">IP_ADDR</span>'<span> IDENTIFIED BY</span> '<span>OldBASE</span></div><div>';</div><div>     </div><div><span>mysql &gt;</span> <span>FLUSH PRIVILEGES</span></div><div>;</div><div>     </div><div><span>mysql &gt;</span> <span>QUIT</span></div><div>;</div><div><span style="font-weight: bold;">      </span>#<span style="font-weight: bold;"> *.*</span>  </div><div><span>means  all databases</span></div><div><br/></div><div>     </div><div><span># </span><span style="font-weight: bold;">IP_ADDR </span><span> is the IP address of your location .  Replace with '</span><span style="font-weight: bold;">%</span><span>' if you want to come from any where. </span></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">phpMyAdmin (MySQL)</span><span style="font-weight: bold;"> (Optional for FAMP)</span><span>Requires PHP . See the PHP Installation below.</span></div><div>  </div><div>=&gt; <span style="font-weight: bold;">cd</span> /usr/ports/databases/phpmyadmin/</div><div>=&gt; sudo <span style="font-weight: bold;">make install clean</span></div><div><br/>This will install the <span style="font-weight: bold;">phpMyAdmin</span> into <span style="font-weight: bold;">/usr/local/www/phpMyAdmin</span></div><div>Edit <span style="font-weight: bold;">config.inc.php</span> to suit your needs.</div><div>Edit the Apache main config file </div><div><span> /usr/local/etc/apache24/</span><span>httpd.conf</span></div><div><br/></div><div>and add the lines inside the</div><div><span> &lt;</span><span style="font-weight: bold;">IfModule</span> <span>alias_module</span><span>&gt;</span></div><div> directory:</div><div><br/></div><div><span># MySQL Database Access</span></div><div><br/></div><div>    </div><div><span>Alias</span> <span>/phpmyadmin</span> <span>/usr/local/www/phpMyAdmin</span></div><div><br/></div><div>        <span style="font-weight: bold;">&lt;Directory</span> </div><div><span>/usr/local/www/phpMyAdmin</span></div><div>&gt;</div><div>           </div><div><span style="font-weight: bold;">Options</span></div><div> None</div><div>           </div><div><span style="font-weight: bold;">AllowOverride</span></div><div> Limit</div><div>           </div><div><span style="font-weight: bold;">Require</span><span> local</span></div><div><br/></div><div>          <span style="font-weight: bold;"> </span></div><div><span style="font-weight: bold;">Require</span><span style="font-weight: bold;"> ip</span> <span>10.10.10.  172.16.0.  </span><span># allow from these subnets to use the</span><span> </span><span style="font-weight: bold;">phpMyAdmin </span><span> </span></div><div><br/></div><div>        <span style="font-weight: bold;">&lt;/Directory&gt;</span></div><div><br/></div><div>Note: You might need: =&gt; sudo chmod 644 /usr/local/www/phpMyAdmin/config.inc.php</div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Installing PHP</span></div><div> </div><div><br/></div><div><span>We will be installing the version 5.6</span></div><div><br/></div><div>=&gt;<span style="font-weight: bold;"> cd</span> </div><div><span>/usr/ports/lang/php56</span>  &amp;&amp; <span style="font-weight: bold;">sudo make install clean</span><span># The following options were set 'on' by default:</span></div><div><br/></div><div>    <span style="font-weight: bold;"> CLI</span>=</div><div><span>on</span></div><div>: Build CLI version</div><div>    <span style="font-weight: bold;"> CGI</span>=</div><div><span>on</span></div><div>: Build CGI version</div><div>    <span style="font-weight: bold;"> FPM</span>=</div><div><span>on</span></div><div>: Build FPM version</div><div>    <span style="font-weight: bold;"> IPV6</span>=</div><div><span>on</span></div><div>: Enable ipv6 support</div><div>    <span style="font-weight: bold;"> LINKTHR</span>=</div><div><span>on</span></div><div>: Link thread lib (for threaded extensions)</div><div><br/></div><div><span># PHP Extensions</span></div><div><br/></div><div>=&gt; <span style="font-weight: bold;">cd</span> </div><div><span>/usr/ports/lang/php56-extensions</span> &amp;&amp; <span style="font-weight: bold;">sudo make install</span><span># Added MySQL and PostgreSQL to the default Options</span></div><div><br/></div><div><br/></div><div><span># PHP module for Apache</span></div><div><br/></div><div>=&gt;<span style="font-weight: bold;"> cd</span> </div><div><span>/usr/ports/www/mod_php56</span></div><div> &amp;&amp; <span style="font-weight: bold;">sudo make install clean</span></div><div><br/></div><div><span># Now we need to set up the </span><span>php.ini </span><span>file. </span><br/><span># In /usr/local/etc there are &quot;development&quot; and &quot;production&quot; versions of the config file.</span></div><div><br/></div><div>=&gt;<span style="font-weight: bold;"> cd</span> </div><div><span>/usr/local/etc</span> &amp;&amp; <span style="font-weight: bold;">sudo cp</span> <span>php.ini-production</span> <span>php.ini</span></div><div><br/></div><div><br/></div><div># Edit the </div><div><span>php.ini</span></div><div> file and set the Timezone for your City</div><div># Timezone Link: <a href="http://php.net/manual/en/timezones.php">http://php.net/manual/en/timezones.php</a></div><div><span style="font-weight: bold;">date.timezone</span> =</div><div><span> America/Toronto</span></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Activating PHP Support in the Apache Server</span><br/><span># We are going to make more changes in the</span><span> /usr/local/etc/apache24/</span><span>httpd.conf</span> <span>file.</span><br/><span># First, make sure that the PHP module is enabled:</span></div><div><br/></div><div><span style="font-weight: bold;">LoadModule</span> </div><div><span>php5_module</span>       <span> libexec/apache24/</span><a href="http://libphp5.so">libphp5.so</a></div><div><br/></div><div><br/></div><div><span># Add</span><span> index.php</span><span> after index.html (means if index.html not found use index.php)</span></div><div><br/></div><div><span style="font-weight: bold;">&lt;IfModule</span> </div><div><span>dir_module</span></div><div><span style="font-weight: bold;">&gt;</span></div><div>    <span style="font-weight: bold;">DirectoryIndex</span></div><div><span> index.html</span> <span>index.php</span></div><div><br/></div><div><span style="font-weight: bold;">&lt;/IfModule&gt;</span></div><div><br/></div><div><span># Support for *.php and *.phps extensions. </span><br/><span># Just before the last line: Include etc/apache24/Includes/*.conf</span><br/><span># ( I don't know if  it does matter. You can try to add at the end.)</span></div><div><br/></div><div><span style="font-weight: bold;">&lt;FilesMatch</span> &quot;</div><div><span>\.php</span></div><div>$&quot;<span style="font-weight: bold;">&gt;</span></div><div>    <span style="font-weight: bold;">SetHandler</span> </div><div><span>application</span>/<span>x-httpd-php</span></div><div><br/></div><div><span style="font-weight: bold;">&lt;/FilesMatch&gt;</span></div><div><span style="font-weight: bold;">&lt;FilesMatch</span> &quot;</div><div><span>\.phps</span></div><div>$&quot;<span style="font-weight: bold;">&gt;</span></div><div>    <span style="font-weight: bold;">SetHandler</span> </div><div><span>application</span>/<span>x-httpd-php-source</span></div><div><br/></div><div><span style="font-weight: bold;">&lt;/FilesMatch&gt;</span></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Testing the PHP Module</span><span># Lets create a PHP file inside our DocumentRoot (</span><a href="http://www.karshi.ca">www.karshi.ca</a><span>)</span><br/><span># We will call it </span><span>test.php</span><span> and insert the following code:</span><br/><span>&lt;?</span><span>php</span> <span style="font-weight: bold;">phpinfo()</span>; <span>?&gt;</span></div><div><br/></div><div><br/></div><div><span># We can visit </span><a href="http://www.karshi.ca/test.php">http://www.karshi.ca/test.php</a><br/><span># You should see a lot of info there</span></div><div><br/></div><div> </div><div><br/></div></en-note>
