<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note><div><br /></div><div><div><br /></div><table><colgroup><col /></colgroup><tbody><tr><td valign="top"><center><span style="font-size: 16px;"><a href="https://www.gsp.com/support/man/" style="font-size: 16px;"><en-media hash="fe7d6b7a56c16a684aadd9835882c23f" type="image/png" width="537" /></a></span></center><hr /><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">Manual Reference Pages  - </span><span style="font-size: 16px; color: rgb(0, 0, 0);"> VM (8)</span></div><hr /><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">NAME</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> vm</span><span style="font-size: 16px; color: rgb(0, 0, 0);">- utility to manage bhyve virtual machines</span></div></blockquote><h3><span style="font-size: 16px; color: rgb(0, 0, 0);">CONTENTS</span></h3><blockquote><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#1" style="font-size: 16px;">Synopsis</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#2" style="font-size: 16px;">Description</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#3" style="font-size: 16px;">Basic Setup</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#4" style="font-size: 16px;">Zfs</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#5" style="font-size: 16px;">Quickstart</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#6" style="font-size: 16px;">Windows Support</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#7" style="font-size: 16px;">Subcommands</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#8" style="font-size: 16px;">Configuration Format</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#9" style="font-size: 16px;">See Also</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#10" style="font-size: 16px;">Bugs</a></div><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#11" style="font-size: 16px;">Author</a></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">SYNOPSIS</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> init</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch list</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch info</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch create</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch import</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name bridge</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch vlan</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name vlan-id</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch nat</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name on|off</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch add</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name interface</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch remove</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name interface</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch destroy</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> create</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">t</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> template</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">][-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">s</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> size</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> destroy</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> list</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> info</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> install</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name iso</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> start</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> stop</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> console</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">com1|com2</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> rename</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> new-name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> add</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">d</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> device</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">][-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">t</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> type</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">][-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">s</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> size|switch</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> reset</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> poweroff</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> startall</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> stopall</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> configure</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> clone</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> new-name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> snapshot</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">f</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name|name@snapshot</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> rollback</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">r</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name@snapshot</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> iso</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">url</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image list</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image create</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">d</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> description</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image provision</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> uuid</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> new-name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image destroy</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> uuid</span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">DESCRIPTION</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="font-size: 16px; color: rgb(0, 0, 0);">utility is used to provide simplified management of</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) virtual machines, including networking and console access.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Networking is handled by creating one or more virtual switches. Each switch has a simple name which is referenced in the virtual machine configuration file. The</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">utility automatically creates a</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=bridge" style="-en-paragraph: true; font-size: 16px;">bridge</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) device for each virtual switch and assigns virtual machine</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=tap" style="-en-paragraph: true; font-size: 16px;">tap</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) interfaces dynamically.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">All configuration for virtual machines is stored in a simple rc style configuration file. When virtual machines are first created, the configuration file is copied from a template which can be specified by the user. Multiple templates can be created providing an easy way to provision guests with specific configurations.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">gracefully handles reboot and shutdown commands from inside the guests, whilst providing full management of the virtual machine from the host system.</span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">BASIC SETUP</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Once</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="font-size: 16px; color: rgb(0, 0, 0);">is installed, create the directory which will store your virtual machine configuration and data. This directory will be referred to as</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir</span><span style="font-size: 16px; color: rgb(0, 0, 0);">throughput this man page.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Add the following into</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> /etc/rc.conf</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">vm_enable="YES"</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">vm_dir="/your/vm/path"</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">vm_list=""</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">vm_delay="5"</span></div><div><br /></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The first and second lines are required to enable the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">utiltity. Please see the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> startall</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">command description for more information on the third and fourth settings.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Now run the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> init</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">command to finish initialisation. This will create subdirectories inside</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">to hold configuration and templates. It will also load any required kernel modules. This command needs to be run on each boot, which is normally handled by the rc.d script.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Copy the sample templates into the directory</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/.templates/</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">. You can create and edit the templates as required. It is recommended to keep a template called</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> default.conf</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">, as this will be used when no template is manually specified.</span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">ZFS</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">If you are using a ZFS dataset to store your virtual machines, and want a new child dataset created for each one, specify the dataset to use in</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> /etc/rc.conf</span><span style="font-size: 16px; color: rgb(0, 0, 0);">as follows:</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">$vm_dir="zfs:pool/dataset"</span></div><div><br /></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">In contrast to earlier versions, if</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is a normal path, a standard subdirectory will be created for each virtual machine, regardless of the file system type. However,</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is now able to handle situations where the dataset mountpoint does not match the dataset name.</span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">QUICKSTART</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Create a virtual switch called</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> public</span><span style="font-size: 16px; color: rgb(0, 0, 0);">(which is the switch name specified in the default templates) and attach it to a real interface. Use your own interface in place of</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> em0</span><span style="font-size: 16px; color: rgb(0, 0, 0);">as required.</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm switch create public</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm switch add public em0</span></div><div><br /></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Download an ISO file to use for installation:</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm iso </span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vmftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/10.1/FreeBSD-10.1-RELEASE-amd64-disc1.iso" style="font-size: 16px;">ftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/10.1/FreeBSD-10.1-RELEASE-amd64-disc1.iso</a></div><div><br /></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Create a new guest using the default template and disk size, then start the installation. The</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> install</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">subcommand will pause while the guest boot loader completes. Once successfully loaded, use the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> console</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">command to complete the installation.</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm create my-guest</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm install my-guest FreeBSD-10.1-RELEASE-amd64-disc1.iso</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm console my-guest</span></div><div><br /></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Please note that Linux guests currently require the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> sysutils/grub2-bhyve</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">package to be installed. This is use in place of</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyveload" style="-en-paragraph: true; font-size: 16px;">bhyveload</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(8) to load the guest kernel into memory.</span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">WINDOWS SUPPORT</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Windows guests are supported on versions of FreeBSD that have UEFI support in</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8). As of October 2015, this is only FreeBSD-CURRENT, so you will first need to build and install the head FreeBSD branch manually.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">You will also need a copy of the UEFI firmware (see URL below), which needs to be placed in</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/.config/BHYVE_UEFI.fd</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">As there is no VGA console in</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="-en-paragraph: true; font-size: 16px;">bhyve</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(8), an unattended installation ISO is required which allows Windows to install and boot without any user interaction. Instructions for creating a suitable ISO can be found at the URL below.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Once the installation ISO is ready, has been placed in the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/.iso</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">directory, and you have the UEFI firmware, installation can be performed as normal.</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm create -t windows -s 30G winguest</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);"># vm install winguest win_repack.iso</span></div><div><br /></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Windows installation has been tested with 2012r2 and takes around 20-25 minutes. During install, the guest will reboot twice (three runs in total). You can see the guest reboot by watching the log file</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/guestname/vm-bhyve.log</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">. The third run should boot fully into Windows. The</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> virtio</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">network adapter will request an IP address using DHCP. Connect to the guest console and press</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> i</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">to see the IP address that has been assigned. The default unattended installation files should make RDP available, using Administrator and Test123 as the default login details.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The UEFI firmware (BHYVE_UEFI_20151002.fd), as well as instructions for creating an unattended installation ISO can currently be obtained from</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"><a href="https://people.freebsd.org/~grehan/bhyve_uefi/">https://people.freebsd.org/~grehan/bhyve_uefi/</a></span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">SUBCOMMANDS</span></h3><blockquote><div><br /></div><table cellpadding="3"><colgroup><col /><col /></colgroup><tbody><tr valign="top"><td><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> init</span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This should be run once after each host reboot before running any other</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="font-size: 16px; color: rgb(0, 0, 0);">commands. The main function of the</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> init</span><span style="font-size: 16px; color: rgb(0, 0, 0);">command is as follows:</span></div><div style="-en-paragraph:true;margin-top:1em;margin-bottom:1em;"><div><span style="font-size: 16px; color: rgb(0, 0, 0);">o Load all necessary kernel modules if not already loaded</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">o Set tap devices to come up automatically when opened</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">o Create any configured virtual switches</span></div></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch list</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">List virtual switches. This reads all configured virtual switches from the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/.config/switch</span><span style="font-size: 16px; color: rgb(0, 0, 0);">file and displays them. If the virtual switches are loaded, it also tries to display the</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=bridge" style="font-size: 16px;">bridge</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4) interface that has been assigned to each one.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch info </span><span style="font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This command shows detailed information about the specified virtual switch. If no switch name is provided, information is output for all configured switches. Information displayed includes the following:</span></div><div style="-en-paragraph:true;margin-top:1em;margin-bottom:1em;"><div><span style="font-size: 16px; color: rgb(0, 0, 0);">o Basic switch settings</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">o Overall bytes sent and received via this switch</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">o Physical ports connected</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">o Virtual ports, including the associated virtual machine</span></div></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch create</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Create a new virtual switch. The name must be supplied and may only contain letters, numbers and dashes. However, it may not contain a dash at the beginning or end.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">When a new virtual switch is created, the persistent configuration file is updated and a new</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=bridge" style="-en-paragraph: true; font-size: 16px;">bridge</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) interface is provisioned.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch import</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> bridge</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This command allows you to import an existing bridge interface that has been created manually and use it for virtual machines. Once a bridge is imported, you can use the switch</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">in guest configuration. Ideally the manual bridge should be configured in</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> /etc/rc.conf</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, so that it is available on each host boot.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Please note that this creates a ’manual’ switch and is designed to allow you to configure your own bridge. None of the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> add</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">,</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> remove</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">,</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> vlan</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">or</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> nat</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">commands are supported on manual switches.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">If a manual switch is destroyed using the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> destroy</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">command, we remove all vm-bhvye configuration, but leave the</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=bridge" style="-en-paragraph: true; font-size: 16px;">bridge</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) interface intact.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch vlan</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> vlan-id</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Assign a VLAN number to a virtual switch. The VLAN number must be between 0-4094.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">When adding an interface to a VLAN enabled virtual switch, a new</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=vlan" style="-en-paragraph: true; font-size: 16px;">vlan</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) interface is created. This interface has the relevent parent interface and VLAN tag configured. This vlan interface is then added to the virtual switch. As such, all traffic between guests on the same switch is untagged and travels freely. However, all traffic exiting via physical interfaces is tagged.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">If the virtual switch already has physical interfaces assigned, they are all removed from the bridge, reconfigured, then re-added.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">To remove the VLAN configuration from a virtual switch, specify a</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> vlan-id</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">of 0.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch nat</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> on|off</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Enable or disable NAT functionality on the specified switch. Please note that</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=&amp;topic=pf" style="font-size: 16px;">pf</a><span style="font-size: 16px; color: rgb(0, 0, 0);">is required for this functionality and must be enabled in</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> /etc/rc.conf</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. If DHCP is desired, please install the</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=&amp;topic=dnsmasq" style="font-size: 16px;">dnsmasq</a><span style="font-size: 16px; color: rgb(0, 0, 0);">pacakge. vm-bhyve will generate a sample dnsmasq configuration in</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> /usr/local/etc/dnsmasq.conf.bhyve</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, but it is up to the user to either use this configuration directly, or merge with any existing dnsmasq settings you have configured.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The switch should have no host ports assigned, as these will end up on the private side of the NAT network.</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">automatically detects the hosts default gateway, which is used as the forwarding interface for NAT connections.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Once enabled, a 172.16.X.0/24 network is assigned to the switch (bridge) interface.</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> X</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is chosen based on the ID of the bridge interface. For example, if the switch is using bridge10, the network will be 172.16.10.0/24.</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=&amp;topic=dnsmasq" style="-en-paragraph: true; font-size: 16px;">dnsmasq</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">can be used to provide DHCP to the guests, and</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=&amp;topic=pf" style="-en-paragraph: true; font-size: 16px;">pf</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">rules are inserted to provide the NAT translation.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> /etc/pf.conf</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is created if it doesn’t exist, and a single include statement is added. This include statement can be moved within the file if required.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch add</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> interface</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Add the specified interface to the named virtual switch.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The interface will immediately be added to the relevant bridge if possible, and stored in the persistent switch configuration file. If a</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> vlan-id</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is specified on the virtual switch, this will cause a new</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=vlan" style="-en-paragraph: true; font-size: 16px;">vlan</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) interface to be created.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch remove</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> interface</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Removes the specified interface from the named virtual switch and updates the persistent configuration file.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> switch destroy</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Completely remove the named virtual switch and all configuration. The associated</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=bridge" style="font-size: 16px;">bridge</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4) interface will be removed, as well as any</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=vlan" style="font-size: 16px;">vlan</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4) interfaces if they are not in use by other virtual switches.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> create</span><span style="font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">t</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> template</span><span style="font-size: 16px; color: rgb(0, 0, 0);">][-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">s</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> size</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Create a new virtual machine.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Unless specified, the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> default.conf</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">template will be used and a 20GB virtual disk image is created. This command will created the virtual machine directory</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/$name</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">, and create the configuration file and empty disk image within.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);">-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">t</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> template</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Specifies the template to use from within the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/.templates</span><span style="font-size: 16px; color: rgb(0, 0, 0);">directory. The</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> .conf</span><span style="font-size: 16px; color: rgb(0, 0, 0);">suffix is not required.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);">-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">s</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> size</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The size of disk image to create in GB. Unless specified, the guest image will be a sparse file 20GB in size.</span></div></td></tr><tr><td><div><br /></div></td><td><div><br /></div></td></tr></tbody></table><table cellpadding="3"><colgroup><col /><col /></colgroup><tbody><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> destroy</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Removes the specified virtual machine from the system, deleting all associated disk images &amp; configuration.</span></div></td></tr><tr valign="top"><td><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> list</span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">List all the virtual machines in the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir</span><span style="font-size: 16px; color: rgb(0, 0, 0);">directory. This will show the basic configuration for each virtual machine, and whether they are currently running.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> info </span><span style="font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Shows detailed information about the specified virtual machine. If no name is given, information for all virtual machines is displayed.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">This output includes detailed information about network and disk devices, including the space usage for all virtual disks (exluding custom disk devices). If the guest is running, the output also shows the amount of host memory curently in use, and additional network details including bytes sent/received for each virtual interface.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> install</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> iso</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Start a guest installation for the named virtual machine, using the specified ISO file. The</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> iso</span><span style="font-size: 16px; color: rgb(0, 0, 0);">argument should be the filename of an ISO file already downloaded into the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/.iso</span><span style="font-size: 16px; color: rgb(0, 0, 0);">directory. ISO files in this directory can be managed using the</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> iso</span><span style="font-size: 16px; color: rgb(0, 0, 0);">subcommand described below.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Once started, the guest loader will be booted in the foreground. This allows you to choose the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> Install</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">boot option for guests that require it. Once the loader has completed, you will be returned to the shell and bhyve will continue running in the background. Use the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> console</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">subcommand to connect to the guest and complete installation.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">After installation, the guest can be rebooted and will restart using its own disk image to boot. At this point the installation ISO file is still attached, allowing you to use the CD/DVD image for any post installation tasks. The ISO file will remain attached after each reboot until the guest is fully stopped.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> start</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Start the named virtual machine. The guest will boot and run completely in the background. Use the</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> console</span><span style="font-size: 16px; color: rgb(0, 0, 0);">subcommand to connect to it if required.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">For each network adapter specified in the guest configuration, a</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=tap" style="-en-paragraph: true; font-size: 16px;">tap</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) interface will be created. If possible, the tap interface will be attached the relevent</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=bridge" style="-en-paragraph: true; font-size: 16px;">bridge</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) interface, based on the virtual switch specified in the guest configuration.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> stop</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Stop a named virtual machine. All</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=tap" style="font-size: 16px;">tap</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4) and</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=nmdm" style="font-size: 16px;">nmdm</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4) devices will be automatically cleaned up once the guest has exited.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> console</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name </span><span style="font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">com1|com2</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Connect to the console of the named virtual machine. Without network access, this is the primary way of connecting to the guest once it is running.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">By default this will connect to the first com port specified in the client configuration, which is usually com1. Alternatively you can specify the com port to connect to.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">This looks for the</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=nmdm" style="-en-paragraph: true; font-size: 16px;">nmdm</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(4) device associated with the virtual machine, and connects to it with</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=1&amp;topic=cu" style="-en-paragraph: true; font-size: 16px;">cu</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(1). Use ~+Ctrl-D to exit the console and return to the host.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> rename</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> new-name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Renames the specified virtual machine. The guest must be stopped to use this function.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> add</span><span style="font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">d</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> device</span><span style="font-size: 16px; color: rgb(0, 0, 0);">][-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">t</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> type</span><span style="font-size: 16px; color: rgb(0, 0, 0);">][-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">s</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> size|switch</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Add a new network or disk device to the named virtual machine. The options depend on the type of device that is being added:</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);">-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">d</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> device</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The type of device to add. Currently this can either be</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> disk</span><span style="font-size: 16px; color: rgb(0, 0, 0);">or</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> network</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);">-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">t</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> type</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">For disk devices, this specifies the type of disk device to create. Valid options for this are</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> zvol</span><span style="font-size: 16px; color: rgb(0, 0, 0);">,</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> sparse-zvol</span><span style="font-size: 16px; color: rgb(0, 0, 0);">and</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> file</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. If not specified, this defaults to</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> file</span><span style="font-size: 16px; color: rgb(0, 0, 0);">.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);">-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">s</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> size|switch</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">For disk devices, this is used to specify the size of the disk image to create. For network devices, use this option to specify the virtual switch to connect the network interface to.</span></div></td></tr><tr><td><div><br /></div></td><td><div><br /></div></td></tr></tbody></table><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">For both types of device, the emulation type will be chosen automatically based on the emulation used for the existing guest devices.</span></div><table cellpadding="3"><colgroup><col /><col /></colgroup><tbody><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> reset</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Forcefully reset the named virtual machine. This can cause corruption to the guest file system just as with real hardware and should only be used if necessary.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> poweroff</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Forcefully power off the named virtual machine. As with</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> reset</span><span style="font-size: 16px; color: rgb(0, 0, 0);">above, this does not inform the guest to shutdown gracefully and should only be used if the guest can not be shut down using normal methods.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> startall</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Start all virtual machines configured for auto-start. This is the command used by the rc.d scripts to start all machines on boot.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The list of virtual machines should be specified using the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_list</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">variable in</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> /etc/rc.conf</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">. This allows you to use shared storage for virtual machine data, whilst making sure that the correct guests are started automatically on each host. (Or to just make sure your required guests start on boot whilst leaving test/un-needed guests alone)</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The delay between starting guests can be set using the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> $vm_delay</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">variable, which defaults to 5 seconds. Too small a delay can cause problems, as each guest doesn’t have enough time to claim a null modem device before the next guest starts. Increasing this value can be useful if you have disk-intensive guests and want to give each guest a chance to fully boot before the next starts.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> stopall</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Stop all running virtual machines. This sends a stop command to all</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) instances, regardless of whether they were starting using</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="font-size: 16px; color: rgb(0, 0, 0);">or not.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> configure</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> configure</span><span style="font-size: 16px; color: rgb(0, 0, 0);">command simply opens the virtual machine configuration file in your default editor, allowing you to easily make changes. Please note, changes do not take effect until the virtual machine is fully shutdown and restarted.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> clone</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> new-name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Create a clone of the virtual machine</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, as long as it is currently powered off. The new machine will be called</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> new-name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, and will be ready to boot with a newly assigned UUID and empty log file.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Please note that this function requires ZFS, and a snapshot will be taken of the original guest, along with any descendant datasets.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> snapshot</span><span style="font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">f</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name|name@snapshot</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Create a snapshot of the names virtual machine. This command is only supported with ZFS and will take a snapshot of the guest dataset and any descendent ZVOL devices.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The guest and snapshot name can be specified in the normal</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> name@snapshot</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">way familiar to ZFS users. If no snapshot name is given, the snapshot is based on the current timestamp in</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> Y-m-d-H:M:S</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">format.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">By default the guest must be stopped to use this command, although you can force a snapshot of a running guest by using the-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">f</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> option.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> rollback</span><span style="font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">r</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name@snapshot</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Rollback the guest to the specified snapshot. This will roll back the guest dataset and all descendent ZVOL devices.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Normally, ZFS will only allow you to roll back to the most recent snapshot. If the snapshot given is not the most recent, ZFS will produce a warning detailing that you need to use the-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">r</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> option to remove the more recent snapshots. It will also produce a list of the snapshots that will be destroyed if you use this option. The-</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">r</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> option can be passed directly into</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">vm</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> rollback</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">The guest must always be stopped to use this command.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> iso </span><span style="font-size: 16px; color: rgb(0, 0, 0);">[</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;">url</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">List all the ISO files currently stored in the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/.iso</span><span style="font-size: 16px; color: rgb(0, 0, 0);">directory. This is often useful during guest installation, allowing you to copy and paste the ISO filename.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">If a</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> url</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is specified, instead of listing ISO files, it attempts to download the given file using</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=1&amp;topic=fetch" style="-en-paragraph: true; font-size: 16px;">fetch</a><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">(1).</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image list</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">List available images. Any virtual machine can be packaged into an image, which can then be used to create additional machines. All images have a globally unique ID (UUID) which is used to identify them. The list command shows the UUID, the original machine name, the date it was created and a short description of the image.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Please note that these commands rely on using ZFS featured to package/unpackage the images, and as such are only available when using a ZFS dataset as the storage location.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image create</span><span style="font-size: 16px; color: rgb(0, 0, 0);">[-</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;">d</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> description</span><span style="font-size: 16px; color: rgb(0, 0, 0);">]</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Create a new image from the named virtual machine. This will create a compressed copy of the original guest dataset, which is stored in the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/images</span><span style="font-size: 16px; color: rgb(0, 0, 0);">directory. It also creates a</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> UUID.manifest</span><span style="font-size: 16px; color: rgb(0, 0, 0);">file which contains details about the image.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Once complete, it will display the UUID which has been assigned to this image.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image provision</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> uuid</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> new-name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Create a new virtual machine, named</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> new-name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, from the specified image UUID.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> image destroy</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-style: italic;"> uuid</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Destroy the specified image.</span></div></td></tr><tr><td><div><br /></div></td><td><div><br /></div></td></tr></tbody></table><div><br /></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">CONFIGURATION FORMAT</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Each virtual machine has a configuration file that specifies the hardware configuration. This uses a similar format to the</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> rc</span><span style="font-size: 16px; color: rgb(0, 0, 0);">files, making them easy to edit by hand. The settings for each guest are stored in</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> $vm_dir/$vm_name/$vm_name.conf</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. An overview of the available configuration options is listed below.</span></div><table cellpadding="3"><colgroup><col /><col /></colgroup><tbody><tr valign="top"><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> guest</span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Specify the type of guest to be installed in this virtual machine. Current valid options for this are generic, freebsd, netbsd, openbsd, windows, centos, ubuntu, debian &amp; alpine linux.</span></div></td></tr><tr valign="top"><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> uefi</span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Set this (any non-empty value) for guests that need UEFI firmware.</span></div></td></tr><tr valign="top"><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> cpu</span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">A numeric value specifying the number of virtual CPU cores to assign to the guest.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> memory</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The amount of memory to assign to the guest. This can be specified in megabytes or gigabytes using the</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> M</span><span style="font-size: 16px; color: rgb(0, 0, 0);">and</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> G</span><span style="font-size: 16px; color: rgb(0, 0, 0);">suffixes.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> hostbridge</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This option allows you to specify the type of hostbridge used for the guest hardware. Normally you can leave this as default, which is to use a standard bhyve hostbridge.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">There are two other options.</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> amd</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">, which is almost identical to the standard hostbridge, but advertises itself with a vendor ID of AMD. There are also some special cases where you may require no hostbridge at all, which can be achieved using the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> none</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">value.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> comports</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This option allows you to specify which com ports to create for the guest. The default is to create a single</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> com1</span><span style="font-size: 16px; color: rgb(0, 0, 0);">port. Valid values for this are</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> com1</span><span style="font-size: 16px; color: rgb(0, 0, 0);">and</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> com2</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. You can also connect two com ports by specifying both, separated by a space.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> utctime</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Set this option to</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> yes</span><span style="font-size: 16px; color: rgb(0, 0, 0);">if the guest RTC should keep UTC time.</span></div></td></tr><tr valign="top"><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> debug</span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">If this is set to</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> yes</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, all output from the</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) process will be written to</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> ${vm_dir}/guest/bhyve.log</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. This is useful for debugging purposes as it allows you to see any error messages that are being produced by</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) itself.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> network0_type</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The emulation to use for the first network adapter. This option can be unspecified if no guest networking is required. The recommended value for this is</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> virtio-net</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. Additional network interfaces can be configured by adding additional</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> networkX_type</span><span style="font-size: 16px; color: rgb(0, 0, 0);">and</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> networkX_switch</span><span style="font-size: 16px; color: rgb(0, 0, 0);">values, replacing</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> X</span><span style="font-size: 16px; color: rgb(0, 0, 0);">with the next available integer.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> network0_switch</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The virtual switch to connect interface</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> 0</span><span style="font-size: 16px; color: rgb(0, 0, 0);">to. This should correspond to a virtual switch created using the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> vm switch create</span><span style="font-size: 16px; color: rgb(0, 0, 0);">subcommand. If the virtual switch is not found, an interface will still be assigned, but not connected to any bridge.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Note that this field is no longer strictly required. If you are using a custom device for the networking that is already configured, you may not need the interface connected to a virtual switch. See the</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> network0_device</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">configuration option.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> network0_device</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Normally vm-bhyve will create a</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=tap" style="font-size: 16px;">tap</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4) device at run-time for each virtual network interface. This may be an issue in more advanced configurations where you want to pre-configure the networking manually in a way unsupported by vm-bhyve. This option allows you to instruct vm-bhyve to use an existing network device for this virtual interface, rather than creating one dynamically.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> network0_mac</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This option allows you to specify a mac address to use for this interface. If not provided,</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) will generate a mac address.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> disk0_type</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The emulation type for the first virtual disk. At least one virtual disk is required. Valid options for this are currently</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> virtio-blk</span><span style="font-size: 16px; color: rgb(0, 0, 0);">and</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> ahci-hd</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. Additional disks can be added by adding additional</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> diskX_type</span><span style="font-size: 16px; color: rgb(0, 0, 0);">and</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> diskX_name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">values, replacing</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> X</span><span style="font-size: 16px; color: rgb(0, 0, 0);">with the next available integer.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> disk0_name</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The filename for the first virtual disk. The first disk is created automatically when provisioning a new virtual machine. If additional disks are added manually, the image will need to be created, usually done using the</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=1&amp;topic=truncate" style="font-size: 16px;">truncate</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(1) or</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=zfs" style="font-size: 16px;">zfs</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) commands. Alternatively, you can use the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> vm add</span><span style="font-size: 16px; color: rgb(0, 0, 0);">command, which will create the disk image for you.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Normally disk images or zvols are stored directly inside the guest. To use a disk image that is stored anywhere else, you can specify the full path in this option, and configure the device as</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> custom</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> disk0_dev</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">The type of device to use for the disk. If not specified, this will default to</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> file</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, and a sparse file, located in the guest directory, will be used as the disk image. Other options include</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> zvol</span><span style="font-size: 16px; color: rgb(0, 0, 0);">&amp;</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> sparse-zvol</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, which will used a ZVOL as the disk image, created directly under the guest dataset. Alternatively you can specify</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> custom</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, in which case</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> diskX_name</span><span style="font-size: 16px; color: rgb(0, 0, 0);">should be the full path to the image file or device.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> disk0_opts</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Any additional options to use for this disk device. Multiple options can be specified, separated by a comma. Please see the</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) man page for more details on supported options.</span></div></td></tr><tr valign="top"><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> uuid</span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This option allows you to specify a fixed UUID for the guests SMBIOS. Normally, the UUID is generated by</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) based on the hostname and guest name. Because this may change if guests are moved between systems, the</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> vm create</span><span style="font-size: 16px; color: rgb(0, 0, 0);">command automatically assigns a UUID to all newly created guests.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> passthruX</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Specify a device to pass through to the guest. You will need to reserve the device first so that is it claimed by the ppt driver on boot.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Once the device is successfully reserved, you can add it to the guest by adding</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> passthruX= 1/2/3</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">to the guest configuration file, where</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> X</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is an integer starting at 0, and</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> 1/2/3</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">is the Base/Slot/Function of the device. If you are passing through multiple functions on the same device, make sure they are specified together in the configuration file in the same sequence as the original device.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Please see <a href="https://wiki.freebsd.org/bhyve/pci_passthru">https://wiki.freebsd.org/bhyve/pci_passthru</a> for more details on how this works.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> virt_random</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Set this option to</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> yes</span><span style="font-size: 16px; color: rgb(0, 0, 0);">if you want to create a</span><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;"> virtio-rnd</span><span style="font-size: 16px; color: rgb(0, 0, 0);">device for this guest.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> grub_commands</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Sometimes you may need to provide grub commands that differ from those generated by</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> vm-bhyve</span><span style="font-size: 16px; color: rgb(0, 0, 0);">. In this case, create a text file inside the guest’s directory containing the commands you need to run. Usually the last entry in the file should be</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> boot</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, followed by a newline. The newline is important, otherwise the last command may not actually be executed.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Once you have created the file, set this option to the name of the file. From that point on, during a normal boot</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);"> vm-bhyve</span><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">will use the commands from this file rather than attempting to generate them automatically.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> zfs_dataset_opts</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">This allows you to specify one or more ZFS properties to set on the dataset when a guest is created. Because properties are assigned as the dataset is created, this option is most useful when specified inside a template. As a guest is created, all properties listed in this option will be applied to the guest dataset.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Multiple properties can be specified, separated by a space. Please note that spaces are not currently supported in the property values.</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> zfs_zvol_opts</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Allows you to specify ZFS properties that should be assigned to any ZVOLs that are created for a guest. As with</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> zfs_dataset_opts</span><span style="font-size: 16px; color: rgb(0, 0, 0);">, this makes most sense when entered into a template, as the properties can be assigned while a guest is being created. Some ZVOL options, such as</span><span style="font-size: 16px; color: rgb(0, 0, 0);"> volblocksize</span><span style="font-size: 16px; color: rgb(0, 0, 0);">can only be set at creation time.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">Multiple properties can be specified, separated by a space. For example, the following will configure the ZVOL block size to 128k, and turn compression off.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 16px; color: rgb(0, 0, 0);">zfs_zvol_opts="volblocksize=128k compress=off"</span></div></td></tr><tr valign="top"><td colspan="2"><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> linux_kernel</span></div></td></tr><tr><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);"> </span></div></td><td><div><span style="font-size: 16px; color: rgb(0, 0, 0);">CentOS guests require the kernel to be loaded inside the boot loader. This option is required for these guests and specifies the kernel version number to load. Hopefully this requirement will be relaxed as</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8) development continues.</span></div></td></tr><tr><td><div><br /></div></td><td><div><br /></div></td></tr></tbody></table><div><br /></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">SEE ALSO</span></h3><blockquote><div><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyve" style="font-size: 16px;">bhyve</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=bhyveload" style="font-size: 16px;">bhyveload</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=tap" style="font-size: 16px;">tap</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=bridge" style="font-size: 16px;">bridge</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=vlan" style="font-size: 16px;">vlan</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=4&amp;topic=nmdm" style="font-size: 16px;">nmdm</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(4),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=1&amp;topic=cu" style="font-size: 16px;">cu</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(1),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=1&amp;topic=fetch" style="font-size: 16px;">fetch</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(1),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=1&amp;topic=truncate" style="font-size: 16px;">truncate</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(1),</span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=zfs" style="font-size: 16px;">zfs</a><span style="font-size: 16px; color: rgb(0, 0, 0);">(8)</span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">BUGS</span></h3><blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Please report all bugs/issues/feature requests to the github project at <a href="https://github.com/churchers/vm-bhyve">https://github.com/churchers/vm-bhyve</a></span></div></blockquote><div><span style="font-size: 16px;">     </span></div><h3><span style="font-size: 16px;">AUTHOR</span></h3><blockquote><div><br /></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">.An Matt Churchyard Aq Mt </span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vmmailto:churchers@gmail.com" style="font-size: 16px;">churchers@gmail.com</a></div></blockquote><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Search for    or go to </span><a href="https://www.gsp.com/cgi-bin/man.cgi?section=8&amp;topic=vm#top" style="font-size: 16px;">Top of page</a><span style="font-size: 16px; color: rgb(0, 0, 0);"> | </span><a href="http://www.gsp.com/support/man/section-8.html" style="font-size: 16px;">Section 8</a><span style="font-size: 16px; color: rgb(0, 0, 0);"> | </span><a href="http://www.gsp.com/support/man/" style="font-size: 16px;">Main Index</a></div><hr /><div><br /></div><table width="100%"><colgroup><col /><col /><col /></colgroup><tbody><tr><td width="33%"><div><br /></div></td><td width="33%" align="center"><div><br /></div></td><td width="33%" align="right"><div><br /></div></td></tr></tbody></table><div style="-en-paragraph:true;margin-top:1em;margin-bottom:1em;"><div><a href="http://www.gsp.com/"><en-media hash="ad6c3f0982280ebbde854e6536192ac2" type="image/gif" width="88" /></a><span style="font-size: 16px; color: rgb(0, 0, 0);"> Visit the GSP </span><a href="http://www.gsp.com/support/man/" style="font-size: 16px;">FreeBSD Man Page Interface</a><span style="font-size: 16px; color: rgb(0, 0, 0);">.</span></div><div><span style="font-size: 16px; color: rgb(0, 0, 0);">Output converted with </span><a href="https://github.com/silviuvulcan/manServer" style="font-size: 16px;">manServer 1.07</a><span style="font-size: 16px; color: rgb(0, 0, 0);">.</span></div></div></td></tr></tbody></table><div><br /></div></div><div><br /></div></en-note>