<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">
<en-note><div><font color="#929292"># Written by KFH: <a style="color: rgb(146, 146, 146);" href="mailto:karshi.hasanov@utoronto.ca">karshi.hasanov@utoronto.ca</a></font></div><div><font color="#929292"># Date: November 20, 2005</font></div><div><font color="#929292"># Last Modified: August 9, 2017</font></div><div><font color="#929292"># Description: The OpenLDAP installation and setting up the phpLDAPadmin access through web.</font></div><div><font color="#929292"><br/></font></div><div><span style="font-weight: bold; font-size: 24px;">Installing the LDAP Server</span> </div><div><br/></div><div><span style="color: rgb(145, 145, 145);"># Always make sure that you have the latest updates</span></div><div>=&gt; <span style="font-weight: bold;">sudo</span> <span style="color: rgb(148, 17, 0);">/usr/sbin/portsnap</span> <span style="color: rgb(255, 64, 255);">fetch</span> <span style="color: rgb(148, 55, 255);">update</span></div><div>=&gt; <span style="font-weight: bold;">cd</span> <span style="color: rgb(148, 17, 0);">/usr/ports/net/</span><span style="color: rgb(148, 17, 0); font-weight: bold;">openldap24-server</span></div><div>=&gt; <span style="font-weight: bold;">sudo make install clean</span></div><div><br/></div><div><span style="font-weight: bold; font-size: 24px;">Installing the phpLDAPadmin</span></div><div><br/></div><div><span style="color: rgb(121, 121, 121);">The </span><span style="color: rgb(121, 121, 121); font-weight: bold;">phpLDAPadmin</span><span style="color: rgb(121, 121, 121);"> is a web-based LDAP client. It provides easy, anywhere-accessible, </span></div><div><span style="color: rgb(121, 121, 121);">multi-language administration for your LDAP server. Its hierarchical tree-viewer and advanced </span></div><div><span style="color: rgb(121, 121, 121);">search functionality make it intuitive to browse and administer your LDAP directory. Since</span></div><div><span style="color: rgb(121, 121, 121);">it is a web application, this LDAP browser works on many platforms, </span><span style="color: rgb(121, 121, 121);">making your LDAP server </span></div><div><span style="color: rgb(121, 121, 121);">easily manageable from any location. phpLDAPadmin is the perfect LDAP browser for the LDAP</span></div><div><span style="color: rgb(121, 121, 121);">professional and novice alike. Its user base consists mostly of LDAP </span><span style="color: rgb(121, 121, 121);">administration professionals.</span></div><div><br/></div><div><span style="color: rgb(146, 146, 146);"># Requirements: The Apache Server with the PHP module running and LDAP enabled PHP Extentions</span></div><div>=&gt; <span style="font-weight: bold;">cd</span> <span style="color: rgb(148, 17, 0);">/usr/ports/net/</span><span style="color: rgb(148, 17, 0); font-weight: bold;">phpldapadmin</span></div><div>=&gt;<span style="font-weight: bold;"> sudo make install clean</span></div><div><br/></div><div><span style="color: rgb(145, 145, 145);"># Don’t pay attention to how setup the web access</span></div><div><br/></div><div><span style="font-weight: bold; font-size: 24px;">Setup the Virtual Host To use the phpLDAPadmin</span></div><div><br/></div><div><span style="color: rgb(145, 145, 145);"># No SSL ( not recommended) . Since its only allow from my domain, its OK.</span></div><div>Edit <span style="color: rgb(148, 17, 0);">/usr/local/etc/apache24/extra/</span><span style="color: rgb(0, 143, 0);">httpd-vhosts.conf</span></div><div><span style="color: rgb(148, 55, 255);">&lt;VirtualHost *:80&gt;</span></div><div>    <span style="font-weight: bold;">DocumentRoot </span>&quot;<span style="color: rgb(148, 17, 0);">/usr/local/www/phpldapadmin/htdocs/</span>“</div><div><span style="font-weight: bold;">    ServerName</span> <a href="http://phpldapadmin.karshi.ca">phpldapadmin.karshi.ca</a></div><div>   <span style="font-weight: bold;"> ErrorLog </span>&quot;<span style="color: rgb(148, 17, 0);">/var/log</span>/<span style="color: rgb(1, 25, 147);">ldap.karshi.ca-error_log</span>&quot;</div><div>   <span style="font-weight: bold;"> CustomLog </span>&quot;<span style="color: rgb(148, 17, 0);">/var/log/</span><span style="color: rgb(1, 25, 147);">ldap.karshi.ca-access_log</span>” common</div><div><br/></div><div>   <span style="font-weight: bold;"> &lt;Directory</span> &quot;<span style="color: rgb(148, 17, 0);">/usr/local/www/phpldapadmin/htdocs/</span>“ <b>&gt;</b></div><div>        <span style="color: rgb(0, 145, 147);">Options</span> none</div><div>        <span style="color: rgb(0, 145, 147);">AllowOverride</span> none</div><div>        </div><div>        <span style="color: rgb(0, 145, 147);">Require</span><span style="color: rgb(255, 38, 0);"> all denied</span></div><div>        <span style="color: rgb(0, 145, 147);">Require</span> <span style="font-weight: bold;">host</span> <a href="http://karshi.ca">karshi.ca</a></div><div>  <span style="font-weight: bold;">  &lt;/Directory&gt;</span></div><div><span style="color: rgb(148, 55, 255);">&lt;/VirtualHost&gt;</span></div><div><br/></div><div><font color="#929292"># SSL on</font></div><div>Edit<font color="#941100"> /usr/local/etc/apache24/extra</font>/<font color="#009051">httpd-ssl.conf</font></div><div><font color="#929292"># phpLDAPadmin access</font></div><div><font color="#9437ff">&lt;VirtualHost _default_:443&gt;</font></div><div>        <b>DocumentRoot</b> &quot;/usr/local/www/phpldapadmin/htdocs/&quot;</div><div>     <b>   ServerName</b> <a href="http://phpldapadmin.karshi.ca:443">phpldapadmin.karshi.ca:443</a></div><div>   <b>     ErrorLog &quot;</b><font color="#941100">/var/log</font>/<font color="#011993">ssl_ldap.karshi.ca—error.log</font>&quot;</div><div>      <b>  TransferLog</b> &quot;<font color="#941100">/var/log/</font><font color="#011993">ssl_ldap.karshi.ca--access.log</font>&quot;</div><div>     <b>   SSLEngine</b> on</div><div>       <font color="#a9a9a9">#   Server Certificate:</font></div><div>       <b>SSLCertificateFile</b> &quot;<font color="#941100">/etc/kfh-certs/ca/certs/freebsd-srv/</font><font color="#011993">freebsd.crt</font>&quot;</div><div>      <font color="#919191"> #   Server Private Key:</font></div><div>       <b>SSLCertificateKeyFile</b> &quot;<font color="#941100">/etc/kfh-certs/ca/certs/freebsd-srv/</font><font color="#011993">freebsd_key.pem</font>&quot;</div><div>     <b> &lt;FilesMatch</b> &quot;\.(cgi|shtml|phtml|php)$&quot;&gt;</div><div>                SSLOptions +StdEnvVars</div><div>      <b>&lt;/FilesMatch&gt;</b></div><div>       <b> &lt;Directory </b>&quot;<font color="#941100">/usr/local/www/phpldapadmin/htdocs/</font>&quot;<b>&gt;</b></div><div>               <font color="#009193"> Options </font>none</div><div>                <font color="#009193">AllowOverride</font> none</div><div><br/></div><div>              <font color="#009193">  Require</font><font color="#ff2600"> all denied</font></div><div>              <font color="#009193">  Require</font><b> host</b> <a href="http://karshi.ca">karshi.ca</a></div><div>       <b> &lt;/Directory&gt;</b></div><div><br/></div><div>       <b> BrowserMatch</b> &quot;MSIE [2-5]” \</div><div>                 nokeepalive ssl-unclean-shutdown \</div><div>                downgrade-1.0 force-response-1.0</div><div><br/></div><div>       #   Per-Server Logging:</div><div>      <b> CustomLog</b> <font color="#941100">&quot;/var/log/</font><font color="#011993">ssl_ldap.karshi.ca-request.log</font>” \</div><div>                          &quot;%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \&quot;%r\&quot; %b&quot;</div><div><font color="#9437ff">&lt;/VirtualHost&gt;</font></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></en-note>
