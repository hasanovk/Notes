<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note><div style="-evernote-webclip:true;"><div><br /></div><div><span style="font-size: 16px;"><div style="font-size:100%;"><div style="font-size: 12px; background-image: url(file:///Applications/Evernote.app/Contents/Resources/common-editor-mac/&amp;quot;http://www.javacreed.com/wp-content/themes/PressGrid-3.3.1/images/bg/bg1.png&amp;quot;); background-attachment: scroll; background-color: rgb(244, 244, 244); background-position: 0px 0px; background-repeat: repeat repeat;"><div style="border-radius:0px;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;box-shadow:none;"><div style="font-size:13px;background:rgb(255, 255, 255) none repeat scroll 0% 0%;"><div style="margin:30px 0px 0px;padding:0px;"><div><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">
</span><div style="position:relative;float:left;width:100%;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> </span><en-media hash="0d7b43455774190fb7d749f1ab3cd35d" type="image/png" style="height:auto;max-width:100%;vertical-align:middle;border:0px none;float:left;width:100%;" width="639" /><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">
</span></div></div></div><div style="margin:30px 0px;font-size:12px;"><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This article continues on a previous </span><a title="Simple Gson Example" href="http://www.javacreed.com/simple-gson-example/" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">article</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, that described simple and basic use of Gson. In this article we will see how to parse complex JSON objects into existing Java objects that do not necessary have the same structure as the JSON object. We will see how the use of the Gson deserialiser (</span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializer</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> </span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonDeserializer.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">) in order to control how the JSON object maps to the Java object.</span></div><h4 style="margin: 10px 0px; text-rendering: optimizelegibility; font-size: 18px;"><span style="font-size: 18px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; font-weight: bold;">Observation</span></h4><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">
Please note the we will use the terms </span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; font-style: italic;">parse</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> or </span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; font-style: italic;">deserialise</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> interchangeably in this article.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">All code listed below is available at: </span><a href="https://java-creed-examples.googlecode.com/svn/gson/Gson%20Deserialiser%20Example" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">https://java-creed-examples.googlecode.com/svn/gson/Gson Deserialiser Example</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. Most of the examples will not contain the whole code and may omit fragments which are not relevant to the example being discussed. The readers can download or view all code from the above link.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The readers are encouraged to first read the article </span><a href="http://www.javacreed.com/simple-gson-example/" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Simple Gson Example</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> before proceeding, unless they are already familiar with Gson.</span></div><h2 style="margin: 10px 0px; text-rendering: optimizelegibility; font-size: 30px;"><span style="font-size: 30px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; font-weight: bold;">A Simple Example</span></h2><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Letâ€™s say we have the following JSON object, where it contains a popular Java book (</span><a target="_blank" href="http://www.amazon.com/Java%C2%BF-Puzzlers-Traps-Pitfalls-Corner/dp/032133678X" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Amazon</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">) title written by two, well known, authors.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">{</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'title':    'Java Puzzlers: Traps, Pitfalls, and Corner Cases',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'isbn-10':  '032133678X',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'isbn-13':  '978-0321336781',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'authors':  ['Joshua Bloch', 'Neal Gafter']</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The above JSON comprise four fields, one of which is an array. These fields represent our book. Using the methods discussed in the </span><a href="http://www.javacreed.com/simple-gson-example/" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Simple Gson Example</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> article would create a problem. By default, Gson expects to find variable names in Java with the same name as that found in JSON. Therefore, we should have a class with the following field names: </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">title</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">isbn-10</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">isbn-13</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">authors</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. But names in Java cannot contain the minus sign (</span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">-</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">) as described in the Java Language Specification (</span><a href="http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Chapter 6</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">).</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Using the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializer</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, we have full control over how JSON is parsed as we will see in the following example. Alternatively we can use annotations as described in </span><a href="http://www.javacreed.com/gson-annotations-example/" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Gson Annotations Example</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> article. Annotations provide less control, but are simpler to use and understand. With that said, annotations have their limitations too and cannot address all problems described here.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Consider the following simple Java object.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part1;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class Book {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private String[] authors;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private String isbn10;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private String isbn13;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private String title;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Methods removed for brevity</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This Java object will be used to hold the book listed in the JSON object shown earlier. Note that JSON object has four fields, one for each field found in JSON. The structure of these two objects (Java and JSON) is the same in this example but this is not required. The Java object can have a different structure than that found in the corresponding JSON object.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">In order to be able to parse JSON to Java we need to create our own instance of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializer</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> interface and register this with the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">GsonBuilder</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> (</span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">). The following example shows our implementation of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializer</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part1;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.lang.reflect.Type;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonArray;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializationContext;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializer;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonElement;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonObject;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonParseException;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class BookDeserializer implements JsonDeserializer&lt;Book&gt; {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  @Override</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  public Book deserialize(final JsonElement json, final Type typeOfT, final JsonDeserializationContext context)</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      throws JsonParseException {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  </span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">//The deserialisation code is missing</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final Book book = new Book();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setTitle(title);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setIsbn10(isbn10);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setIsbn13(isbn13);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setAuthors(authors);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    return book;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The above example is not complete and we still need to add the most important thing, which is the deserialisation. Letâ€™s understand this class before we make it more complex by adding more code to it. </span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The interface </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializer</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> requires a type, which is the type of object that we will be parsed. In this case, we are parsing JSON into the Java object of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. The return type of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">deserialize()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method must be of the same type as the generics parameter, </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Gson will parse the JSON object into a Java object of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> (</span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonElement.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">). An instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> can be one of the following: </span></div><ul style="padding:0px;margin:0px 0px 10px 25px;"><li><div><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> (</span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonPrimitive.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">) â€“ such as a string or integer</span></div></li><li><div><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> (</span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">) â€“ a collection of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">s indexed by thier name (of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">String</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">). This is similar to a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Map&lt;String, JsonElement&gt;</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> (</span><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">) </span></div></li><li><div><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonArray</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> (</span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonArray.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">) â€“ a collection of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">s. Note that the array elements can be any of the four types and mixed types are supported.</span></div></li><li><div><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonNull</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> (</span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonArray.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">) â€“ a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">null</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> value</span></div></li></ul><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 656px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/Types-of-JsonElement.png" rel="prettyphoto" title="Types of JsonElement" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="95eefb8e3ec6542793f616a2223175b0" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="646" title="" /><br /></a></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">Types of JsonElement</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The above image shows all types of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> can be thought of a collection of name/value pairs where the values are of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. The following image shows an example of JSON object hierarchy.</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 959px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/Json-Object-Hierarchy.png" rel="prettyphoto" title="Json Object Hierarchy" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="d2de1383bc4e101a3bf13b16cd78a73c" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="949" title="" /><br /></a></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">Json Object Hierarchy</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The above image shows a JSON object hierarchy with a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as its root. It is important to note that, different from Java, JSON supports arrays of different types. In the above image, the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonArray</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> comprises </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">s, </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonArray</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">s and </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">s. Please note that the JSON object hierarchy shown above does not reflect the JSON object listed before. Following is the JSON object hierarchy for the JSON object listed before.</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 950px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/Book-Json-Object-Hierarchy.png" rel="prettyphoto" title="Book Json Object Hierarchy" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="794176188bb52ef011064565f7bac234" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="940" title="" /><br /></a></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">Book Json Object Hierarchy</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">If we are to deserialise this JSON object, we first need to convert the given </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> into a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as shown next.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// The variable 'json' is passed as a parameter to the deserialize() method</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">final JsonObject jsonObject = json.getAsJsonObject();</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">A </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> can be converted to any of the other types using a similar approach.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The elements within the a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> can be retrieved by their name. For example, to retrieve the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">title</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> element from the JSON listed above we can do the following.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// The variable 'json' is passed as a parameter to the deserialize() method</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">final JsonObject jsonObject = json.getAsJsonObject();</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">JsonElement titleElement = jsonObject.get("title")</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The object returned is not a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">String</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> but yet another </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. This can be converted to </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">String</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> by invoking the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">getAsString()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as shown below.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// The variable 'json' is passed as a parameter to the deserialize() method</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">final JsonObject jsonObject = json.getAsJsonObject();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">JsonElement titleElement = jsonObject.get("title")</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">final String title = jsonTitle.getAsString();</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The following example shows how to convert the JSON object listed above using a custom deserializer.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part1;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.lang.reflect.Type;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonArray;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializationContext;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializer;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonElement;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonObject;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonParseException;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class BookDeserializer implements JsonDeserializer&lt;Book&gt; {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  @Override</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  public Book deserialize(final JsonElement json, final Type typeOfT, final JsonDeserializationContext context)</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      throws JsonParseException {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">final JsonObject jsonObject = json.getAsJsonObject();</span></div><div><br /></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final JsonElement jsonTitle = jsonObject.get("title");</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final String title = jsonTitle.getAsString();</span></div><div><br /></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final String isbn10 = jsonObject.get("isbn-10").getAsString();</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final String isbn13 = jsonObject.get("isbn-13").getAsString();</span></div><div><br /></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final JsonArray jsonAuthorsArray = jsonObject.get("authors").getAsJsonArray();</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final String[] authors = new String[jsonAuthorsArray.size()];</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    for (int i = 0; i &lt; authors.length; i++) {</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final JsonElement jsonAuthor = jsonAuthorsArray.get(i);</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      authors[i] = jsonAuthor.getAsString();</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final Book book = new Book();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setTitle(title);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setIsbn10(isbn10);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setIsbn13(isbn13);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setAuthors(authors);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    return book;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">In the above example, we are retrieving the JSON element and its four fields and returning an instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Before we can utilise our new deserializer, we must instruct Gson to use our deserializer when parsing objects of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, as shown in the next code example.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part1;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.io.InputStreamReader;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.Gson;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.GsonBuilder;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class Main {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  public static void main(String[] args) throws Exception {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Configure Gson</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    GsonBuilder gsonBuilder = new GsonBuilder();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">gsonBuilder.registerTypeAdapter(Book.class, new BookDeserializer());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    Gson gson = gsonBuilder.create();</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// The JSON data</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    try(Reader reader = new InputStreamReader(Main.class.getResourceAsStream("/part1/sample.json"), "UTF-8")){</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Parse JSON to Java</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      Book book = gson.fromJson(reader, Book.class);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      System.out.println(book);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">In the above example, we are creating an instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Gson</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> through the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">GsonBuilder</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. Using the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">registerTypeAdapter()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method, we are registering our deserializer and instructing Gson to use our deserializer when deserializing objects of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. When we request Gson to deserialize an object to the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> class, Gson will use our deserializer. The following steps describes what happens when we invoke: </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;"> gson.fromJson(data, Book.class)</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">.</span></div><ol style="padding:0px;margin:0px 0px 10px 25px;"><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">Parse the input as </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">. Note that even though the type of the object is </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">, this can be anything. At this stage, the string JSON object is deserialised into Java objects of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">s. This step also ensures that the given JSON data is valid.</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">Find the deserializer for the given object, in this case the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserializer</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> instance.</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">Invokes the method </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">deserialize()</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> and provides the necessary parameters. In this example, our </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">deserialize()</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> will be invoked. Here an object of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> is created from the given </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> object. This is from Java to Java conversion.</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">Returns the object returned by the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">deserialize()</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> method to the caller of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">fromJson()</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> method. This is like a chain, where Gson receives an object from our deserializer and returns it to its caller.</span></div></li></ol><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Running the above example would print the following:</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">Java Puzzlers: Traps, Pitfalls, and Corner Cases </span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  [ISBN-10: 032133678X] [ISBN-13: 978-0321336781]</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">Written by:</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  &gt;&gt; Joshua Bloch</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  &gt;&gt; Neal Gafter</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This concludes our simple example. This example acts as a primer for following, more complex, examples. In the next example we will discuss an enhanced version of the objects discussed here, where the authors are not a simple string but an object.</span></div><h2 style="margin: 10px 0px; text-rendering: optimizelegibility; font-size: 30px;"><span style="font-size: 30px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; font-weight: bold;">Nested Objects</span></h2><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">In this example we will describe how to deserialise nested objects, that is, objects within other objects. Here we will introduce a new entity, the author. A book, together with the title and ISBN can have a list of authors. On the other hand every author can have many books. The JSON object that will be using in this example differs from the previous one to cater for the new entity as shown next:</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">{</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'title': 'Java Puzzlers: Traps, Pitfalls, and Corner Cases',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'isbn': '032133678X',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'authors':[</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'id': 1,</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'name': 'Joshua Bloch'</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    },</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'id': 2,</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'name': 'Neal Gafter'</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  ]</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The structure of the JSON object was changed slightly and instead of primitives we have the authors as JSON objects as shown in the following image.</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 966px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/Book-and-Authors-Json-Objects-Hierarchy.png" rel="prettyphoto" title="Book and Authors Json Objects Hierarchy" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="4b0632769dc0fe7e4f28bf8661a43eb1" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="956" title="" /><br /></a></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">Book and Authors Json Objects Hierarchy</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">We still have one book, only this time we have a more complex and detailed JSON object. Together with a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">name</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, the author also has an </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">id</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. A new class called </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> is added to the model and the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> class now uses it to save the author information. This immediately leads to the following question.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><div><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; font-weight: bold;">How should we deserialise the new </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; font-weight: bold; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; font-weight: bold;"> class?</span></div><div><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">
There are several options. </span></div></div><ol style="padding:0px;margin:0px 0px 10px 25px;"><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">We can update the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserializer</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> and add the authorsâ€™ deserialisation code there. This has a limitation as it binds the deserialization of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> with that of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">, and thus is not recommended.</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">We can use the default Gson implementation, which will work well in this case as both the Java object (the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> class) and the JSON objects have the same fieldsâ€™ names and can be deserialised as described in the article </span><a title="Simple Gson Example" href="http://www.javacreed.com/simple-gson-example/" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;">Simple Gson Example</a><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">.</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">Alternatively, we can write an </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserializer</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> class which will take care of the deserialisation of authors.</span></div></li></ol><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">We will start with the second option, to keep the changes to a minimum and the example as simple as possible. Then we add the new deserializer to show the flexibility of Gson.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializer</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> provides an instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializationContext</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> (</span><a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonDeserializationContext.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Java Doc</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">) as the third parameter to the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">deserialize()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method. We have not yet used this parameter. We can delegate the deserialisation of objects to the given instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializationContext</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. It will deserialise the given </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and returns an instance of the required type as shown below.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">Author author = context.deserialize(jsonElement, Author.class); </span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The example shown above, is delegating the deserialisation of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> class to the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">context</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. In turn it will try to locate an instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializer</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> that can deserialize it, if one is registered, otherwise it uses the default mechanism as described in the article titled: </span><a title="Simple Gson Example" href="http://www.javacreed.com/simple-gson-example/" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Simple Gson Example</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Our example uses an array of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">s and thus we need to use the correct type as shown in the following example.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part2;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.lang.reflect.Type;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonArray;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializationContext;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializer;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonElement;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonObject;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonParseException;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class BookDeserializer implements JsonDeserializer&lt;Book&gt; {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  @Override</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  public Book deserialize(final JsonElement json, final Type typeOfT, final JsonDeserializationContext context)</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      throws JsonParseException {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">   final JsonObject jsonObject = json.getAsJsonObject();</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final String title = jsonObject.get("title").getAsString();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final String isbn10 = jsonObject.get("isbn-10").getAsString();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final String isbn13 = jsonObject.get("isbn-13").getAsString();</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Delegate the deserialization to the context</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">Author[] authors = context.deserialize(jsonObject.get("authors"), Author[].class);</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final Book book = new Book();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setTitle(title);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setIsbn10(isbn10);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setIsbn13(isbn13);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    book.setAuthors(authors);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    return book;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Converting from a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> to a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> was very easy and straightforward as we saw in the above example.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Like the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, we can write the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">ArthurDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and deserialise the author in a similar fashion we did with the book as shown next,</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part2;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.lang.reflect.Type;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializationContext;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializer;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonElement;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonObject;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonParseException;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class AuthorDeserializer implements JsonDeserializer {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  @Override</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  public Author deserialize(final JsonElement json, final Type typeOfT, final JsonDeserializationContext context)</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      throws JsonParseException {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final JsonObject jsonObject = json.getAsJsonObject();</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final Author author = new Author();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    author.setId(jsonObject.get("id").getAsInt());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    author.setName(jsonObject.get("name").getAsString());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    return author;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">In order to use the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">ArthurDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> we need to add this to the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">GsonBuilder</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as shown next,</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part2;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.io.IOException;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.io.InputStreamReader;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.io.Reader;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.Gson;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.GsonBuilder;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class Main {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  public static void main(final String[] args) throws IOException {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Configure GSON</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final GsonBuilder gsonBuilder = new GsonBuilder();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    gsonBuilder.registerTypeAdapter(Book.class, new BookDeserializer());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">gsonBuilder.registerTypeAdapter(Author.class, new AuthorDeserializer());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    final Gson gson = gsonBuilder.create();</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Read the JSON data</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    try (Reader reader = new InputStreamReader(Main.class.getResourceAsStream("/part2/sample.json"), "UTF-8")) {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Parse JSON to Java</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final Book book = gson.fromJson(reader, Book.class);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      System.out.println(book);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">There is no need to change the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as the deserialisation of the author is delegated to the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">context</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. This is another advantage of using the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">context</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> to deserialise the other/nested objects. Running the above code will produce the following.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">Java Puzzlers: Traps, Pitfalls, and Corner Cases [032133678X]</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">Written by:</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  &gt;&gt; [1] Joshua Bloch</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  &gt;&gt; [2] Neal Gafter</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This concludes this section about nested objects. In the next section we will see how to refer to JSON objects located elsewhere in the JSON object tree.</span></div><h2 style="margin: 10px 0px; text-rendering: optimizelegibility; font-size: 30px;"><span style="font-size: 30px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 40px; font-weight: bold;">Object References</span></h2><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Consider the following JSON.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">{</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  </span><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">'authors': [</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    {</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'id': 1,</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'name': 'Joshua Bloch'</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    },</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    {</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'id': 2,</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'name': 'Neal Gafter'</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  ]</span><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">,</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  'books': [</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'title': 'Java Puzzlers: Traps, Pitfalls, and Corner Cases',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'isbn': '032133678X',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      </span><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">'authors':[1, 2]</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    },</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'title': 'Effective Java (2nd Edition)',</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      'isbn': '0321356683', </span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      </span><span style="font-size: 13px; color: red; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">'authors':[1]</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  ]</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The JSON object shown above comprise two authors and two books. The books have a reference to the authors through their ids as in this example the booksâ€™ field </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">authors</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> only contains the authorsâ€™ ids. This is quite a common scenario as this approach will reduce the size of the JSON object as duplicate objects are referred to by their id. The following image captures the new JSON object hierarchy.</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 957px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/New-JSON-Object-Hierarchy.png" rel="prettyphoto" title="New JSON Object Hierarchy" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="4dbbbe5c64bbdd64bb9b61c39953b481" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="947" title="" /><br /></a></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">New JSON Object Hierarchy</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This resembles relational database tables (</span><a href="http://en.wikipedia.org/wiki/Relational_database" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Wiki</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">), where the book has a foreign key (</span><a href="http://en.wikipedia.org/wiki/Foreign_key" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Wiki</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">) to the authors table. This new JSON object structure introduces new challenges that need to be addressed. When deserialising the books, we need to get hold of the authors that were deserialised from other branch of the JSON object hierarchy. The book only has the author id. The rest of the author information is found elsewhere, out of scope of the current context.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">There are various approaches to this problem, some of which are listed below.</span></div><ol style="padding:0px;margin:0px 0px 10px 25px;"><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">One approach is to use a two stage processing. First we parse JSON to Java, that is deserialise the books and authors as these appear in JSON. The book class will contain an array of authorsâ€™ ids and not an array or authors. Then, in the second stage, we associate the objects and set the authors to their books. The following image shows the flow described here.
</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 610px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/Two-Stage-Processing.png" rel="prettyphoto" title="Two Stage Processing" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="6e5e498d2ba29e763781b9600831dc04" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="600" title="" /></a></div></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">Two Stage Processing</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This approach requires more classes but provides a great deal of flexibility and provides better separation of concerns. We need to create a set of classes that simply represent the JSON objects in Java, then we need another set of classes that matches our requirements (model). In this example, we have one </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Book</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> class and another </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> class, two in total. Using this approach, we will end up with four classes, two for the book and another two for the author. While in this example, it may seem feasible, this becomes more complex when we have tens, if not hundreds of classes.
</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">Another approach is to provide the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> class with all authors and then have the deserialiser retrieving the authors from this shared object. This approach removes the need of the middle stage as the JSON objects are deserialised into </span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; font-style: italic;">proper</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> Java objects without passing through an intermediate stage.
</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 552px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/Shared-Object-between-Deserialisers.png" rel="prettyphoto" title="Shared Object between Deserialisers" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="0d47318acc95af80a705c2c2b03846d4" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="542" title="" /></a></div></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">Shared Object between Deserialisers</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">While this approach may sound appealing, it requires that the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> share a common object. Furthermore, when retrieving authors the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> has to refer to this shared object instead of using the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializationContext</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as we did before. This approach requires changes in several places. The deserialisers need to be modified and the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">main()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method too.
</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> can be made such that it caches the deserialised authors and return these next time requested by their id. This approach is quite attractive as it leverages the use of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonDeserializationContext</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> and make the relationship transparent. Unfortunately it adds in complexity as the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> needs to handle the caching. With that said, this approach requires the least changes as only the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> is modified.
</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 610px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/AuthorDeserialiser-using-Cache.png" rel="prettyphoto" title="AuthorDeserialiser using Cache" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="3c41a6b973ec786af53e8a0fdf093191" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="600" title="" /></a></div></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 17px; font-style: italic; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;"> using Cache</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">As shown in the image above, only the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> accesses the cache object. The rest of the system is unaware of this.
</span></div></li></ol><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">All approaches are feasible and all have their advantages and disadvantages. We will use the third approach as it is the one that has the least impact on the project.</span></div><h4 style="margin: 10px 0px; text-rendering: optimizelegibility; font-size: 18px;"><span style="font-size: 18px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; font-weight: bold;">Observation</span></h4><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">
In theory, the first approach provides better separation of concerns when compared with the other two. We can have the association logic within the new </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Data</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> class. But this requires many changes when compared with the third approach. That was the reason behind the use of the third approach over the other two. Always consider the effort required to make a change and try to minimise it.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The JSON object shown above contains two arrays. We need to have a new Java class that reflects this JSON object.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part3;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class Data {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private Author[] authors;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private Book[] books;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Methods removed for brevity</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The fields order determines which of the two sets is deserialised first. This does not matter in our case and the books can be deserialised before the authors as we will see later on.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> need to be modified such that it caches the authors that were deserialised as shown next.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">package com.javacreed.examples.gson.part3;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.lang.reflect.Type;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.util.HashMap;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import java.util.Map;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializationContext;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonDeserializer;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonElement;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonObject;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonParseException;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">import com.google.gson.JsonPrimitive;</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">public class AuthorDeserializer implements JsonDeserializer&lt;Author&gt; {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private final ThreadLocal&lt;Map&lt;Integer, Author&gt;&gt; cache = new ThreadLocal&lt;Map&lt;Integer, Author&gt;&gt;() {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    @Override</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    protected Map&lt;Integer, Author&gt; initialValue() {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      return new HashMap&lt;&gt;();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  };</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  @Override</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  public Author deserialize(final JsonElement json, final Type typeOfT, final JsonDeserializationContext context)</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      throws JsonParseException {</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Only the ID is available</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    if (json.isJsonPrimitive()) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final JsonPrimitive primitive = json.getAsJsonPrimitive();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      return getOrCreate(primitive.getAsInt());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    } </span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// The whole object is available</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    if (json.isJsonObject()) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final JsonObject jsonObject = json.getAsJsonObject();</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final Author author = getOrCreate(jsonObject.get("id").getAsInt());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      author.setName(jsonObject.get("name").getAsString());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      return author;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    throw new JsonParseException("Unexpected JSON type: " + json.getClass().getSimpleName());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private Author getOrCreate(final int id) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    Author author = cache.get().get(id);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    if (author == null) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      author = new Author();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      author.setId(id);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      cache.get().put(id, author);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    return author;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">}</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">We made several changes in this class. Let us go through these changes one by one.</span></div><ol style="padding:0px;margin:0px 0px 10px 25px;"><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">The authors are stored in the following object.
</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private final ThreadLocal&lt;Map&lt;Integer, Author&gt;&gt; cache = new ThreadLocal&lt;Map&lt;Integer, Author&gt;&gt;() {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    @Override</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    protected Map&lt;Integer, Author&gt; initialValue() {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      return new HashMap&lt;&gt;();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  };</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><div><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">It uses a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Map&lt;String, Object&gt;</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as cache mechanism. The map is saved within a</span></div><div><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">
</span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">ThreadLocal</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> (</span><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">JavaDoc</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">) instance to isolate state between the multiple threads. This class allows multiple threads to use the same variable without interfering with the other threads.</span></div></div><h4 style="margin: 10px 0px; text-rendering: optimizelegibility; font-size: 18px;"><span style="font-size: 18px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; font-weight: bold;">Observation</span></h4><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">
Please note that while this approach is thread-safe, it may not fulfil the needs of specific application domain needs and thus one may have to use a different approach. Please refer to the articles: </span><a href="http://www.javacreed.com/how-to-cache-results-to-boost-performance/" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">How to Cache Results to Boost Performance</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and </span><a href="http://www.javacreed.com/caching-made-easy-with-spring/" target="_blank" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 13px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px; color: rgb(0, 136, 204); text-decoration: none;">Caching Made Easy with Spring</a><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> for more caching examples.</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">The authors are always retrieved using the following method.
</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  private Author getOrCreate(final int id) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    Author author = cache.get().get(id);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    if (author == null) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      author = new Author();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      cache.get().put(id, author);</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    return author;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">  }</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This method first tries to obtain the authors instance from the cache. If no author is found with the given id, then one is created and added to the cache. </span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This approach allows us to create the author with just its id, and then populate its contents later on when they become available. That is why the order of deserialisation does not affect the outcome. We can first deserialise the books and then the authors. In this case, first the authors are created with just their ids and the their names are added.</span></div></li><li><div><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;">The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">deserialize()</span><span style="font-size: 12px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> was modified to handle the new requirements. Since many changes were applied, we will split this method further and describe each part separately.
</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The descerialiser can receive either a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> or a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. When the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> executes the following code, the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> passed to the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> will be an instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="margin-bottom: 30px; padding-bottom: 20px; border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(233, 233, 233); font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// This is executed within the BookDeserialiser</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    Author[] authors = context.deserialize(jsonObject.get("authors"), Author[].class);</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The following image shows this process.</span></div><div style="background-image: none; background-attachment: scroll; background-color: rgb(255, 255, 255); border: 1px solid rgb(240, 240, 240); max-width: 96%; padding: 10px 5px 5px; text-align: center; margin: 5px auto 20px; width: 877px; background-position: 0% 0%; background-repeat: repeat repeat;"><div><div><a href="http://www.javacreed.com/wp-content/uploads/2012/12/Delegating-Deserialisation-to-Context.png" rel="prettyphoto" title="Delegating Deserialisation to Context" style="cursor: pointer; transition: background 0s ease 0s, color 0.2s linear 0s; -webkit-transition: background 0s ease 0s, color 0.2s linear 0s; font-size: 12px; font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; color: rgb(0, 136, 204); text-decoration: none;"><en-media hash="3c7272ae2830f6f1c078dc930587aa52" type="image/png" style="vertical-align:middle;height:auto;max-width:100%;border:0px none;margin:0px;padding:0px;width:auto;visibility:visible;opacity:1;" width="867" title="" /></a></div></div><div style="margin: 0px; font-size: 11px; padding: 5px 0px;"><span style="font-size: 11px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 17px; font-style: italic;">Delegating Deserialisation to Context</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> delegates the deseialisation of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">s array to the context, and provides an array of integers. For each integer, the context invokes the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">deserialize()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method of the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">AuthorDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and pass the integer as a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">On the other hand, when the authors are deserialised, we will receive an instance of </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> containing the author and his/her details. Therefore, before we convert the given </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, we need to determine whether it is of the correct type.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// Only the ID is available</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    if (json.isJsonPrimitive()) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final JsonPrimitive primitive = json.getAsJsonPrimitive();</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final Author author = getOrCreate(primitive.getAsInt());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      return author;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    } </span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">In the above example, only the id was available. The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> is converted into a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and then into an </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">int</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">. This </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">int</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> is used to retrieve the author from the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">getOrCreate()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> can be of type </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> as shown next.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    </span><span style="font-size: 13px; color: rgb(63, 127, 95); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">// The whole object is available</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    if (json.isJsonObject()) {</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final JsonObject jsonObject = json.getAsJsonObject();</span></div><div><br /></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      final Author author = getOrCreate(jsonObject.get("id").getAsInt());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      author.setName(jsonObject.get("name").getAsString());</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">      return author;</span></div><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    }</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">In this case, the name is added to the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">Author</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> instance returned by the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">getOrCreate()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method, before the author is returned.</span></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">Finally, if the given </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonElement</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> instance is neither a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonPrimitive</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> nor a </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">JsonObject</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">, an exception is thrown to indicate that the given type is not supported.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">    throw new JsonParseException("Unexpected JSON type: " + json.getClass().getSimpleName());</span></div></div></li></ol><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">The above captures all required changes to accommodate and address the new challenges. The </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">BookDeserialiser</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> and the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">main()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> method do not require any changes. Running the </span><span style="font-size: 12px; color: rgb(221, 17, 68); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 18px; background-color: rgb(247, 247, 249); border: 1px solid rgb(225, 225, 232); border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; padding: 2px 4px; background-position: initial initial; background-repeat: initial initial;">main()</span><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;"> will produce the following.</span></div><div style="padding: 9.5px; font-size: 13px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background-color: rgb(245, 245, 245); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 13px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 20px;">Output missing...</span></div></div><div style="margin: 0px 0px 10px; font-size: 13px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 18px;">This example concludes our article about the Gson desieralizer. Using a custom deserializer is not difficult and enables us to work with different JSON representations with little effort. Note that the Java domain objects do not need to correspond to the JSON object being parsed. Furthermore, we can use existing Java objects with new JSON representations. Some problems may be more challenging than others to solve. Try to keep the changes to the existing code to a minimum and your design as flexible as required (not as possible).</span></div><div style="clear:both;margin:10px 0px;"><h2 style="margin: 10px 0px; text-rendering: optimizelegibility; font-size: 30px;"><br /></h2></div></div><div style="margin-top:30px;border-bottom:medium none;"><div><div style="margin:0px 0px 20px;"><div style="margin: 0px 0px 10px; direction: ltr; width: 100%; max-width: 100%; box-sizing: border-box;"><div></div></div><div style="margin: 0px 0px 10px;"><span style="font-size: 13px; color: rgb(102, 102, 102); font-family: HelveticaNeue, 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px;"> 

</span></div></div></div></div></div></div></div></div></span></div></div><div><br /></div></en-note>