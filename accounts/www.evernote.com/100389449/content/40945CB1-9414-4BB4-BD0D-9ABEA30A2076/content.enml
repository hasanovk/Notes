<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note><div><span style="font-size: 18px; font-weight: bold;">Kernel Tuning</span></div><div><br /></div><div>=&gt;<span style="font-weight: bold;"> cd</span> <span style="color: rgb(148, 17, 0);">/usr/src/sys/amd64/conf </span></div><div>=&gt; <span style="color: rgb(255, 38, 0);">sudo</span><span style="font-weight: bold;"> cp</span> <span style="color: rgb(0, 150, 255);">GENERIC</span> <span style="color: rgb(0, 143, 0);">KFH</span></div><div><br /></div><div># Edit the kernel</div><div>ident    KFH</div><div><en-media hash="4aaff6a4a6269abe283cbbb5a9d2c950" type="image/png" /><br /></div><div><br /></div><div>=&gt; <span style="font-weight: bold;">cd</span> <span style="color: rgb(148, 17, 0);">/usr/src</span></div><div>=&gt;<span style="color: rgb(255, 38, 0);"> sudo</span> <span style="font-weight: bold;">make buildkernel KERNCONF=</span><span style="color: rgb(0, 143, 0); font-style: italic; font-weight: bold;">KFH</span></div><div>=&gt;<span style="color: rgb(255, 38, 0);"> sudo</span>  <span style="font-weight: bold;">make installkernel KERNCONF=</span><span style="color: rgb(0, 143, 0); font-style: italic; font-weight: bold;">KFH</span></div><div><br /></div><div># If everything go well, reboot</div><div>=&gt; <span style="color: rgb(255, 47, 146);">sudo</span> <span style="font-weight: bold;">shutdown -r now</span></div><div><br /></div><div><span style="font-size: 18px; font-weight: bold;">Memory Tunning</span></div><div><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Edit the "<span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; color: rgb(148, 23, 81);">/var/db/postgres/data96/</span></span><span style="font-size: 16px; color: rgb(148, 23, 81); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">postgresql.conf</span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">" file</span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">shared_buffers </span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">= 3GB</span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">maintenance_work_mem</span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> = 16GB</span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">work_mem</span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> = 80GB</span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">effective_cache_size</span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> = 32GB</span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">synchronous_commit</span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> = off</span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">checkpoint_timeout </span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">= 10min </span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">checkpoint_completion_target </span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">= 0.9 </span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">fsync</span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> = </span><span style="font-size: 16px; color: rgb(255, 38, 0); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">off   &lt;— Put it back “on” when you are done!</span></div><div><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">•</span><span style="font-size: 16px; color: rgb(83, 27, 147); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">full_page_writes</span><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> = </span><span style="font-size: 16px; color: rgb(255, 38, 0); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">off  &lt;<span style="font-size: 16px; color: rgb(255, 38, 0); font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">— Put it back “on” when you are done!</span></span></div><div><br /></div><div><span style="font-size: 18px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: bold; line-height: normal;">Software Requirements:</span></div><div><span style="font-size: 16px;"><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">OS: FreeBSD-11.1 64 bits</span></span></div><div><span style="font-size: 16px;"><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Nominatim: Version 3.1.0</span></span></div><div><span style="font-size: 16px;"><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Downloaded: <a href="https://nominatim.org/release/Nominatim-" style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">https://nominatim.org/release/Nominatim-</a><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">3.1.0.tar.bz2</span></span></span></div><div>Instruction: <a href="http://nominatim.org/release-docs/latest/admin/Installation/">http://nominatim.org/release-docs/latest/admin/Installation/</a></div><div><br /></div><div><span style="font-family: Helvetica; font-style: normal; font-variant-caps: normal; line-height: normal; font-weight: bold; font-size: 18px;">Packages Require:</span></div><div><span style="font-size: 16px;"><span style="font-size: 16px;"><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">CMake: <span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">cmake-3.10.2, <span style="font-size: 16px;"><span style="font-size: 16px; font-family: Helvetica; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; color: rgb(148, 17, 0);">/usr/ports/devel/cmake/</span></span></span></span></span></span></div><div>PostgreSQL Server: postgresql96-server-9.6.8,<span style="color: rgb(148, 17, 0);"> /usr/ports/databases/postgresql96-server/</span></div><div>PostgreSQL Client ( usually get installed with the server): postgresql96-client-9.6.8</div><div>PostgreSQL Contribution: postgresql96-contrib-9.6.8, <span style="color: rgb(148, 17, 0);">/usr/ports/databases/postgresql96-contrib/</span></div><div>PostGIS (Geographic objects support for PostgreSQL server): postgis24-2.4.3, <span style="color: rgb(148, 17, 0);">/usr/ports/databases/postgis24/</span></div><div>Apache Server: apache24-2.4.29,<span style="color: rgb(148, 17, 0);"> /usr/ports/www/apache24/</span></div><div><br /></div><div>PEAR : pear-1.10.5_1, /usr/ports/devel/pear/</div><div>(PHP Extension and Application Repository): </div><div>After installing issue: =&gt; sudo pear install DB</div><div><br /></div><div>Py-GDAL: py27-gdal-2.2.3, /usr/ports/graphics/py-gdal/</div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div></en-note>